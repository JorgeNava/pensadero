var Qy=Object.create;var ko=Object.defineProperty,Zy=Object.defineProperties,Jy=Object.getOwnPropertyDescriptor,Xy=Object.getOwnPropertyDescriptors,ev=Object.getOwnPropertyNames,ld=Object.getOwnPropertySymbols,tv=Object.getPrototypeOf,dd=Object.prototype.hasOwnProperty,nv=Object.prototype.propertyIsEnumerable;var ud=(t,e,n)=>e in t?ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,le=(t,e)=>{for(var n in e||={})dd.call(e,n)&&ud(t,n,e[n]);if(ld)for(var n of ld(e))nv.call(e,n)&&ud(t,n,e[n]);return t},Re=(t,e)=>Zy(t,Xy(e));var rv=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var iv=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ev(e))!dd.call(t,i)&&i!==n&&ko(t,i,{get:()=>e[i],enumerable:!(r=Jy(e,i))||r.enumerable});return t};var sv=(t,e,n)=>(n=t!=null?Qy(tv(t)):{},iv(e||!t||!t.__esModule?ko(n,"default",{value:t,enumerable:!0}):n,t));var v=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Gy=rv((ad,cd)=>{"use strict";(function(t,e){typeof ad=="object"&&typeof cd<"u"?cd.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.TagCloud=e())})(ad,function(){"use strict";function t(u,h){var f=Object.keys(u);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(u);h&&(p=p.filter(function(g){return Object.getOwnPropertyDescriptor(u,g).enumerable})),f.push.apply(f,p)}return f}function e(u){for(var h=1;h<arguments.length;h++){var f=arguments[h]!=null?arguments[h]:{};h%2?t(Object(f),!0).forEach(function(p){s(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):t(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}function n(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function r(u,h){for(var f=0;f<h.length;f++){var p=h[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,c(p.key),p)}}function i(u,h,f){return h&&r(u.prototype,h),f&&r(u,f),Object.defineProperty(u,"prototype",{writable:!1}),u}function s(u,h,f){return h=c(h),h in u?Object.defineProperty(u,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[h]=f,u}function o(){return o=Object.assign?Object.assign.bind():function(u){for(var h=1;h<arguments.length;h++){var f=arguments[h];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])}return u},o.apply(this,arguments)}function a(u,h){if(typeof u!="object"||u===null)return u;var f=u[Symbol.toPrimitive];if(f!==void 0){var p=f.call(u,h||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(u)}function c(u){var h=a(u,"string");return typeof h=="symbol"?h:String(h)}var l=function(){function u(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body,f=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0;n(this,u);var g=this;if(!h||h.nodeType!==1)return new Error("Incorrect element type");g.$container=h,g.texts=f||[],g.config=e(e({},u._defaultConfig),p||{}),g.radius=g.config.radius,g.depth=2*g.radius,g.size=1.5*g.radius,g.maxSpeed=u._getMaxSpeed(g.config.maxSpeed),g.initSpeed=u._getInitSpeed(g.config.initSpeed),g.direction=g.config.direction,g.keep=g.config.keep,g.paused=!1,g._createElment(),g._init(),u.list.push({el:g.$el,container:h,instance:g})}return i(u,[{key:"_createElment",value:function(){var f=this,p=document.createElement("div");p.className=f.config.containerClass,f.config.useContainerInlineStyles&&(p.style.position="relative",p.style.width="".concat(2*f.radius,"px"),p.style.height="".concat(2*f.radius,"px")),f.items=[],f.texts.forEach(function(g,m){var _=f._createTextItem(g,m);p.appendChild(_.el),f.items.push(_)}),f.$container.appendChild(p),f.$el=p}},{key:"_createTextItem",value:function(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=this,m=document.createElement("span");if(m.className=g.config.itemClass,g.config.useItemInlineStyles){m.style.willChange="transform, opacity, filter",m.style.position="absolute",m.style.top="50%",m.style.left="50%",m.style.zIndex=p+1,m.style.filter="alpha(opacity=0)",m.style.opacity=0;var _="50% 50%";m.style.WebkitTransformOrigin=_,m.style.MozTransformOrigin=_,m.style.OTransformOrigin=_,m.style.transformOrigin=_;var E="translate3d(-50%, -50%, 0) scale(1)";m.style.WebkitTransform=E,m.style.MozTransform=E,m.style.OTransform=E,m.style.transform=E}return g.config.useHTML?m.innerHTML=f:m.innerText=f,e({el:m},g._computePosition(p))}},{key:"_computePosition",value:function(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=this,m=g.texts.length;p&&(f=Math.floor(Math.random()*(m+1)));var _=Math.acos(-1+(2*f+1)/m),E=Math.sqrt((m+1)*Math.PI)*_;return{x:g.size*Math.cos(E)*Math.sin(_)/2,y:g.size*Math.sin(E)*Math.sin(_)/2,z:g.size*Math.cos(_)/2}}},{key:"_requestInterval",value:function(f,p){var g=function(){return window.requestAnimationFrame}(),m=new Date().getTime(),_={};function E(){_.value=g(E);var O=new Date().getTime(),T=O-m;T>=p&&(f.call(),m=new Date().getTime())}return _.value=g(E),_}},{key:"_init",value:function(){var f=this;f.active=!1,f.mouseX0=f.initSpeed*Math.sin(f.direction*(Math.PI/180)),f.mouseY0=-f.initSpeed*Math.cos(f.direction*(Math.PI/180)),f.mouseX=f.mouseX0,f.mouseY=f.mouseY0;var p=window.matchMedia("(hover: hover)");(!p||p.matches)&&(u._on(f.$el,"mouseover",function(){f.active=!0}),u._on(f.$el,"mouseout",function(){f.active=!1}),u._on(f.keep?window:f.$el,"mousemove",function(g){g=g||window.event;var m=f.$el.getBoundingClientRect();f.mouseX=(g.clientX-(m.left+m.width/2))/5,f.mouseY=(g.clientY-(m.top+m.height/2))/5})),f._next(),f.interval=f._requestInterval(function(){f._next.call(f)},10)}},{key:"_next",value:function(){var f=this;if(!f.paused){!f.keep&&!f.active&&(f.mouseX=Math.abs(f.mouseX-f.mouseX0)<1?f.mouseX0:(f.mouseX+f.mouseX0)/2,f.mouseY=Math.abs(f.mouseY-f.mouseY0)<1?f.mouseY0:(f.mouseY+f.mouseY0)/2);var p=-(Math.min(Math.max(-f.mouseY,-f.size),f.size)/f.radius)*f.maxSpeed,g=Math.min(Math.max(-f.mouseX,-f.size),f.size)/f.radius*f.maxSpeed;if(f.config.reverseDirection&&(p=-p,g=-g),!(Math.abs(p)<=.01&&Math.abs(g)<=.01)){var m=Math.PI/180,_=[Math.sin(p*m),Math.cos(p*m),Math.sin(g*m),Math.cos(g*m)];f.items.forEach(function(E){var O=E.x,T=E.y*_[1]+E.z*-_[0],X=E.y*_[0]+E.z*_[1],G=O*_[3]+X*_[2],Z=T,Ee=X*_[3]-O*_[2],Ge=2*f.depth/(2*f.depth+Ee);E.x=G,E.y=Z,E.z=Ee,E.scale=Ge.toFixed(3);var qe=Ge*Ge-.25;qe=(qe>1?1:qe).toFixed(3);var ct=E.el,Yy=(E.x-ct.offsetWidth/2).toFixed(2),Ky=(E.y-ct.offsetHeight/2).toFixed(2),_i="translate3d(".concat(Yy,"px, ").concat(Ky,"px, 0) scale(").concat(E.scale,")");ct.style.WebkitTransform=_i,ct.style.MozTransform=_i,ct.style.OTransform=_i,ct.style.transform=_i,ct.style.filter="alpha(opacity=".concat(100*qe,")"),ct.style.opacity=qe})}}}},{key:"update",value:function(f){var p=this;p.texts=f||[],p.texts.forEach(function(E,O){var T=p.items[O];T||(T=p._createTextItem(E,O),o(T,p._computePosition(O,!0)),p.$el.appendChild(T.el),p.items.push(T)),p.config.useHTML?T.el.innerHTML=E:T.el.innerText=E});var g=p.texts.length,m=p.items.length;if(g<m){var _=p.items.splice(g,m-g);_.forEach(function(E){p.$el.removeChild(E.el)})}}},{key:"destroy",value:function(){var f=this;f.interval=null;var p=u.list.findIndex(function(g){return g.el===f.$el});p!==-1&&u.list.splice(p,1),f.$container&&f.$el&&f.$container.removeChild(f.$el)}},{key:"pause",value:function(){var f=this;f.paused=!0}},{key:"resume",value:function(){var f=this;f.paused=!1}}],[{key:"_on",value:function(f,p,g,m){f.addEventListener?f.addEventListener(p,g,m):f.attachEvent?f.attachEvent("on".concat(p),g):f["on".concat(p)]=g}}]),u}();l.list=[],l._defaultConfig={radius:100,maxSpeed:"normal",initSpeed:"normal",direction:135,keep:!0,reverseDirection:!1,useContainerInlineStyles:!0,useItemInlineStyles:!0,containerClass:"tagcloud",itemClass:"tagcloud--item",useHTML:!1},l._getMaxSpeed=function(u){return{slow:.5,normal:1,fast:2}[u]||1},l._getInitSpeed=function(u){return{slow:16,normal:32,fast:80}[u]||32};var d=function(u,h,f){typeof u=="string"&&(u=document.querySelectorAll(u)),u.forEach||(u=[u]);var p=[];return u.forEach(function(g){g&&p.push(new l(g,h,f))}),p.length<=1?p[0]:p};return d})});var Fo=null;var Lo=1,fd=Symbol("SIGNAL");function V(t){let e=Fo;return Fo=t,e}function hd(){return Fo}var jo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ov(t){if(!(Ho(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lo)){if(!t.producerMustRecompute(t)&&!Uo(t)){t.dirty=!1,t.lastCleanEpoch=Lo;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Lo}}function Vo(t){return t&&(t.nextProducerIndex=0),V(t)}function pd(t,e){if(V(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ho(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$o(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Uo(t){Wo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ov(n),r!==n.version))return!0}return!1}function Bo(t){if(Wo(t),Ho(t))for(let e=0;e<t.producerNode.length;e++)$o(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function $o(t,e){if(av(t),t.liveConsumerNode.length===1&&cv(t))for(let r=0;r<t.producerNode.length;r++)$o(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wo(i),i.producerIndexOfThis[r]=e}}function Ho(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function av(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function cv(t){return t.producerNode!==void 0}function lv(){throw new Error}var uv=lv;function gd(t){uv=t}function M(t){return typeof t=="function"}function Ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ii=Ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mt(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var J=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(M(r))try{r()}catch(s){e=s instanceof Ii?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{md(s)}catch(o){e=e??[],o instanceof Ii?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ii(e)}}add(e){var n;if(e&&e!==this)if(this.closed)md(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mt(n,e)}remove(e){let{_finalizers:n}=this;n&&Mt(n,e),e instanceof t&&e._removeParent(this)}};J.EMPTY=(()=>{let t=new J;return t.closed=!0,t})();var zo=J.EMPTY;function wi(t){return t instanceof J||t&&"closed"in t&&M(t.remove)&&M(t.add)&&M(t.unsubscribe)}function md(t){M(t)?t():t.unsubscribe()}var Ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var un={setTimeout(t,e,...n){let{delegate:r}=un;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=un;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Di(t){un.setTimeout(()=>{let{onUnhandledError:e}=Ie;if(e)e(t);else throw t})}function Go(){}var yd=qo("C",void 0,void 0);function vd(t){return qo("E",void 0,t)}function _d(t){return qo("N",t,void 0)}function qo(t,e,n){return{kind:t,value:e,error:n}}var Rt=null;function dn(t){if(Ie.useDeprecatedSynchronousErrorHandling){let e=!Rt;if(e&&(Rt={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Rt;if(Rt=null,n)throw r}}else t()}function Ed(t){Ie.useDeprecatedSynchronousErrorHandling&&Rt&&(Rt.errorThrown=!0,Rt.error=t)}var xt=class extends J{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wi(e)&&e.add(this)):this.destination=hv}static create(e,n,r){return new fn(e,n,r)}next(e){this.isStopped?Ko(_d(e),this):this._next(e)}error(e){this.isStopped?Ko(vd(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ko(yd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dv=Function.prototype.bind;function Yo(t,e){return dv.call(t,e)}var Qo=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ci(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ci(r)}else Ci(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ci(n)}}},fn=class extends xt{constructor(e,n,r){super();let i;if(M(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ie.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Yo(e.next,s),error:e.error&&Yo(e.error,s),complete:e.complete&&Yo(e.complete,s)}):i=e}this.destination=new Qo(i)}};function Ci(t){Ie.useDeprecatedSynchronousErrorHandling?Ed(t):Di(t)}function fv(t){throw t}function Ko(t,e){let{onStoppedNotification:n}=Ie;n&&un.setTimeout(()=>n(t,e))}var hv={closed:!0,next:Go,error:fv,complete:Go};var hn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bi(t){return t}function Id(t){return t.length===0?bi:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var H=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=gv(n)?n:new fn(n,r,i);return dn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=wd(r),new r((i,s)=>{let o=new fn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[hn](){return this}pipe(...n){return Id(n)(this)}toPromise(n){return n=wd(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function wd(t){var e;return(e=t??Ie.Promise)!==null&&e!==void 0?e:Promise}function pv(t){return t&&M(t.next)&&M(t.error)&&M(t.complete)}function gv(t){return t&&t instanceof xt||pv(t)&&wi(t)}function mv(t){return M(t?.lift)}function ee(t){return e=>{if(mv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Zo(t,e,n,r,i)}var Zo=class extends xt{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Dd=Ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var lt=(()=>{class t extends H{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ti(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Dd}next(n){dn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){dn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){dn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?zo:(this.currentObservers=null,s.push(n),new J(()=>{this.currentObservers=null,Mt(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new H;return n.source=this,n}}return t.create=(e,n)=>new Ti(e,n),t})(),Ti=class extends lt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zo}};var nr=class extends lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jo={now(){return(Jo.delegate||Date).now()},delegate:void 0};var Si=class extends J{constructor(e,n){super()}schedule(e,n=0){return this}};var rr={setInterval(t,e,...n){let{delegate:r}=rr;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rr;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var pn=class extends Si{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return rr.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rr.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mt(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var gn=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};gn.now=Jo.now;var mn=class extends gn{constructor(e,n=gn.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xo=new mn(pn);var Ni=class extends pn{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ai=class extends mn{};var ea=new Ai(Ni);function Cd(t){return t&&M(t.schedule)}function yv(t){return t[t.length-1]}function bd(t){return Cd(yv(t))?t.pop():void 0}function ta(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sd(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(u){o(u)}}function c(d){try{l(r.throw(d))}catch(u){o(u)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Td(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pt(t){return this instanceof Pt?(this.v=t,this):new Pt(t)}function Nd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,u)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(m,_){s.push([f,g,m,_])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(g){h(s[0][3],g)}}function l(f){f.value instanceof Pt?Promise.resolve(f.value.v).then(d,u):h(s[0][2],f)}function d(f){c("next",f)}function u(f){c("throw",f)}function h(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ad(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Td=="function"?Td(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Mi=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ri(t){return M(t?.then)}function xi(t){return M(t[hn])}function Pi(t){return Symbol.asyncIterator&&M(t?.[Symbol.asyncIterator])}function Oi(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ki=vv();function Li(t){return M(t?.[ki])}function Fi(t){return Nd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Pt(n.read());if(i)return yield Pt(void 0);yield yield Pt(r)}}finally{n.releaseLock()}})}function ji(t){return M(t?.getReader)}function fe(t){if(t instanceof H)return t;if(t!=null){if(xi(t))return _v(t);if(Mi(t))return Ev(t);if(Ri(t))return Iv(t);if(Pi(t))return Md(t);if(Li(t))return wv(t);if(ji(t))return Dv(t)}throw Oi(t)}function _v(t){return new H(e=>{let n=t[hn]();if(M(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ev(t){return new H(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Iv(t){return new H(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Di)})}function wv(t){return new H(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Md(t){return new H(e=>{Cv(t,e).catch(n=>e.error(n))})}function Dv(t){return Md(Fi(t))}function Cv(t,e){var n,r,i,s;return Sd(this,void 0,void 0,function*(){try{for(n=Ad(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function he(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ut(t,e=0){return ee((n,r)=>{n.subscribe(se(r,i=>he(r,t,()=>r.next(i),e),()=>he(r,t,()=>r.complete(),e),i=>he(r,t,()=>r.error(i),e)))})}function dt(t,e=0){return ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Rd(t,e){return fe(t).pipe(dt(e),ut(e))}function xd(t,e){return fe(t).pipe(dt(e),ut(e))}function Pd(t,e){return new H(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Od(t,e){return new H(n=>{let r;return he(n,e,()=>{r=t[ki](),he(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}function Vi(t,e){if(!t)throw new Error("Iterable cannot be null");return new H(n=>{he(n,e,()=>{let r=t[Symbol.asyncIterator]();he(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function kd(t,e){return Vi(Fi(t),e)}function Ld(t,e){if(t!=null){if(xi(t))return Rd(t,e);if(Mi(t))return Pd(t,e);if(Ri(t))return xd(t,e);if(Pi(t))return Vi(t,e);if(Li(t))return Od(t,e);if(ji(t))return kd(t,e)}throw Oi(t)}function ir(t,e){return e?Ld(t,e):fe(t)}function Ui(...t){let e=bd(t);return ir(t,e)}function xe(t,e){return ee((n,r)=>{let i=0;n.subscribe(se(r,s=>{r.next(t.call(e,s,i++))}))})}function Fd(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,u=!1,h=()=>{u&&!c.length&&!l&&e.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;fe(n(g,d++)).subscribe(se(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let _=c.shift();o?he(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return t.subscribe(se(e,f,()=>{u=!0,h()})),()=>{a?.()}}function Bi(t,e,n=1/0){return M(e)?Bi((r,i)=>xe((s,o)=>e(r,s,i,o))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),ee((r,i)=>Fd(r,i,t,n)))}function na(t,e){return ee((n,r)=>{let i=0;n.subscribe(se(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ra(t,e){return M(e)?Bi(t,e,1):Bi(t,1)}function ia(t){return ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function sa(t,e){return ee((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(se(r,c=>{i?.unsubscribe();let l=0,d=s++;fe(t(c,d)).subscribe(i=se(r,u=>r.next(e?e(c,u,d,l++):u),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function $i(t,e,n){let r=M(t)||e||n?{next:t,error:e,complete:n}:t;return r?ee((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(se(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):bi}var P=class extends Error{constructor(e,n){super(ps(e,n)),this.code=e}};function ps(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gs(t){return{toString:t}.toString()}var Hi="__parameters__";function bv(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Tv(t,e,n){return gs(()=>{let r=bv(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let u=c.hasOwnProperty(Hi)?c[Hi]:Object.defineProperty(c,Hi,{value:[]})[Hi];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function z(t){for(let e in t)if(t[e]===z)return e;throw Error("Could not find renamed property on target object.")}function ge(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function jd(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var Sv=z({__forward_ref__:z});function vf(t){return t.__forward_ref__=vf,t.toString=function(){return ge(this())},t}function De(t){return Nv(t)?t():t}function Nv(t){return typeof t=="function"&&t.hasOwnProperty(Sv)&&t.__forward_ref__===vf}function L(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function Za(t){return Vd(t,_f)||Vd(t,Ef)}function Vd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Av(t){let e=t&&(t[_f]||t[Ef]);return e||null}function Ud(t){return t&&(t.hasOwnProperty(Bd)||t.hasOwnProperty(Mv))?t[Bd]:null}var _f=z({\u0275prov:z}),Bd=z({\u0275inj:z}),Ef=z({ngInjectableDef:z}),Mv=z({ngInjectorDef:z}),b=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=L({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function If(t){return t&&!!t.\u0275providers}var Rv=z({\u0275cmp:z}),xv=z({\u0275dir:z}),Pv=z({\u0275pipe:z});var $d=z({\u0275fac:z}),or=z({__NG_ELEMENT_ID__:z}),Hd=z({__NG_ENV_ID__:z});function Ov(t){return typeof t=="string"?t:t==null?"":String(t)}function kv(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ov(t)}function Lv(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new P(-200,t)}function Ja(t,e){throw new P(-201,!1)}var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(R||{}),pa;function wf(){return pa}function pe(t){let e=pa;return pa=t,e}function Df(t,e,n){let r=Za(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&R.Optional)return null;if(e!==void 0)return e;Ja(t,"Injector")}var Fv={},ar=Fv,ga="__NG_DI_FLAG__",Zi="ngTempTokenPath",jv="ngTokenPath",Vv=/\n/gm,Uv="\u0275",Wd="__source",En;function Bv(){return En}function ft(t){let e=En;return En=t,e}function $v(t,e=R.Default){if(En===void 0)throw new P(-203,!1);return En===null?Df(t,void 0,e):En.get(t,e&R.Optional?null:void 0,e)}function D(t,e=R.Default){return(wf()||$v)(De(t),e)}function x(t,e=R.Default){return D(t,ys(e))}function ys(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ma(t){let e=[];for(let n=0;n<t.length;n++){let r=De(t[n]);if(Array.isArray(r)){if(r.length===0)throw new P(900,!1);let i,s=R.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Wv(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(D(i,s))}else e.push(D(r))}return e}function Hv(t,e){return t[ga]=e,t.prototype[ga]=e,t}function Wv(t){return t[ga]}function zv(t,e,n,r){let i=t[Zi];throw e[Wd]&&i.unshift(e[Wd]),t.message=Gv(`
`+t.message,i,n,r),t[jv]=i,t[Zi]=null,t}function Gv(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Uv?t.slice(2):t;let i=ge(e);if(Array.isArray(e))i=e.map(ge).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ge(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Vv,`
  `)}`}var Je=Hv(Tv("Optional"),8);function cr(t,e){let n=t.hasOwnProperty($d);return n?t[$d]:null}function qv(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function Yv(t){return t.flat(Number.POSITIVE_INFINITY)}function Xa(t,e){t.forEach(n=>Array.isArray(n)?Xa(n,e):e(n))}function Cf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ji(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lr={},Pe=[],ur=new b(""),bf=new b("",-1),Tf=new b(""),Xi=class{get(e,n=ar){if(n===ar){let r=new Error(`NullInjectorError: No provider for ${ge(e)}!`);throw r.name="NullInjectorError",r}return n}},Sf=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Sf||{}),Le=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Le||{}),gt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(gt||{});function Kv(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function ya(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];Zv(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Qv(t){return t===3||t===4||t===6}function Zv(t){return t.charCodeAt(0)===64}function ec(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?zd(t,n,i,null,e[++r]):zd(t,n,i,null,null))}}return t}function zd(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Nf="ng-template";function Jv(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Kv(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(tc(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function tc(t){return t.type===4&&t.value!==Nf}function Xv(t,e,n){let r=t.type===4&&!n?Nf:t.value;return e===r}function e_(t,e,n){let r=4,i=t.attrs,s=i!==null?r_(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!we(r)&&!we(c))return!1;if(o&&we(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Xv(t,c,n)||c===""&&e.length===1){if(we(r))return!1;o=!0}}else if(r&8){if(i===null||!Jv(t,i,c,n)){if(we(r))return!1;o=!0}}else{let l=e[++a],d=t_(c,i,tc(t),n);if(d===-1){if(we(r))return!1;o=!0;continue}if(l!==""){let u;if(d>s?u="":u=i[d+1].toLowerCase(),r&2&&l!==u){if(we(r))return!1;o=!0}}}}return we(r)||o}function we(t){return(t&1)===0}function t_(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return i_(e,t)}function n_(t,e,n=!1){for(let r=0;r<e.length;r++)if(e_(t,e[r],n))return!0;return!1}function r_(t){for(let e=0;e<t.length;e++){let n=t[e];if(Qv(n))return e}return t.length}function i_(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Gd(t,e){return t?":not("+e.trim()+")":e}function s_(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!we(o)&&(e+=Gd(s,i),i=""),r=o,s=s||!we(r);n++}return i!==""&&(e+=Gd(s,i)),e}function o_(t){return t.map(s_).join(",")}function a_(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!we(i))break;i=s}r++}return{attrs:e,classes:n}}function Af(t){return gs(()=>{let e=Pf(t),n=Re(le({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Sf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Le.Emulated,styles:t.styles||Pe,_:null,schemas:t.schemas||null,tView:null,id:""});Of(n);let r=t.dependencies;return n.directiveDefs=Yd(r,!1),n.pipeDefs=Yd(r,!0),n.id=d_(n),n})}function c_(t){return wn(t)||Rf(t)}function l_(t){return t!==null}function vs(t){return gs(()=>({type:t.type,bootstrap:t.bootstrap||Pe,declarations:t.declarations||Pe,imports:t.imports||Pe,exports:t.exports||Pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qd(t,e){if(t==null)return lr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=gt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==gt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Mf(t){return gs(()=>{let e=Pf(t);return Of(e),e})}function wn(t){return t[Rv]||null}function Rf(t){return t[xv]||null}function xf(t){return t[Pv]||null}function u_(t){let e=wn(t)||Rf(t)||xf(t);return e!==null?e.standalone:!1}function Pf(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||lr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Pe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qd(t.inputs,e),outputs:qd(t.outputs),debugInfo:null}}function Of(t){t.features?.forEach(e=>e(t))}function Yd(t,e){if(!t)return null;let n=e?xf:c_;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(l_)}function d_(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ht(t){return{\u0275providers:t}}function f_(...t){return{\u0275providers:kf(!0,t),\u0275fromNgModule:!0}}function kf(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Xa(e,o=>{let a=o;va(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Lf(i,s),n}function Lf(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];nc(i,s=>{e(s,r)})}}function va(t,e,n,r){if(t=De(t),!t)return!1;let i=null,s=Ud(t),o=!s&&wn(t);if(!s&&!o){let c=t.ngModule;if(s=Ud(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)va(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Xa(s.imports,d=>{va(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Lf(l,e)}if(!a){let l=cr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Pe},i),e({provide:Tf,useValue:i,multi:!0},i),e({provide:ur,useValue:()=>D(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;nc(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function nc(t,e){for(let n of t)If(n)&&(n=n.\u0275providers),Array.isArray(n)?nc(n,e):e(n)}var h_=z({provide:String,useValue:z});function Ff(t){return t!==null&&typeof t=="object"&&h_ in t}function p_(t){return!!(t&&t.useExisting)}function g_(t){return!!(t&&t.useFactory)}function _a(t){return typeof t=="function"}var _s=new b(""),zi={},m_={},oa;function rc(){return oa===void 0&&(oa=new Xi),oa}var Fe=class{},dr=class extends Fe{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ia(e,o=>this.processProvider(o)),this.records.set(bf,yn(void 0,this)),i.has("environment")&&this.records.set(Fe,yn(void 0,this));let s=this.records.get(_s);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Tf,Pe,R.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=V(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),V(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ft(this),r=pe(void 0),i;try{return e()}finally{ft(n),pe(r)}}get(e,n=ar,r=R.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Hd))return e[Hd](this);r=ys(r);let i,s=ft(this),o=pe(void 0);try{if(!(r&R.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=w_(e)&&Za(e);l&&this.injectableDefInScope(l)?c=yn(Ea(e),zi):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&R.Self?rc():this.parent;return n=r&R.Optional&&n===ar?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Zi]=a[Zi]||[]).unshift(ge(e)),s)throw a;return zv(a,e,"R3InjectorError",this.source)}else throw a}finally{pe(o),ft(s)}}resolveInjectorInitializers(){let e=V(null),n=ft(this),r=pe(void 0),i;try{let s=this.get(ur,Pe,R.Self);for(let o of s)o()}finally{ft(n),pe(r),V(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(e){e=De(e);let n=_a(e)?e:De(e&&e.provide),r=v_(e);if(!_a(e)&&e.multi===!0){let i=this.records.get(n);i||(i=yn(void 0,zi,!0),i.factory=()=>ma(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=V(null);try{return n.value===zi&&(n.value=m_,n.value=n.factory()),typeof n.value=="object"&&n.value&&I_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{V(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=De(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ea(t){let e=Za(t),n=e!==null?e.factory:cr(t);if(n!==null)return n;if(t instanceof b)throw new P(204,!1);if(t instanceof Function)return y_(t);throw new P(204,!1)}function y_(t){if(t.length>0)throw new P(204,!1);let n=Av(t);return n!==null?()=>n.factory(t):()=>new t}function v_(t){if(Ff(t))return yn(void 0,t.useValue);{let e=__(t);return yn(e,zi)}}function __(t,e,n){let r;if(_a(t)){let i=De(t);return cr(i)||Ea(i)}else if(Ff(t))r=()=>De(t.useValue);else if(g_(t))r=()=>t.useFactory(...ma(t.deps||[]));else if(p_(t))r=()=>D(De(t.useExisting));else{let i=De(t&&(t.useClass||t.provide));if(E_(t))r=()=>new i(...ma(t.deps));else return cr(i)||Ea(i)}return r}function yn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function E_(t){return!!t.deps}function I_(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function w_(t){return typeof t=="function"||typeof t=="object"&&t instanceof b}function Ia(t,e){for(let n of t)Array.isArray(n)?Ia(n,e):n&&If(n)?Ia(n.\u0275providers,e):e(n)}function jf(t,e){t instanceof dr&&t.assertNotDestroyed();let n,r=ft(t),i=pe(void 0);try{return e()}finally{ft(r),pe(i)}}function D_(){return wf()!==void 0||Bv()!=null}function C_(t){return typeof t=="function"}var Xe=0,C=1,I=2,te=3,Ce=4,be=5,es=6,wa=7,mt=8,Dn=9,Ye=10,ye=11,fr=12,Kd=13,vr=14,Ke=15,Ft=16,vn=17,Qe=18,Es=19,Vf=20,pt=21,aa=22,me=23,yt=25,Uf=1;var jt=7,ts=8,Cn=9,ue=10,ns=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ns||{});function kt(t){return Array.isArray(t)&&typeof t[Uf]=="object"}function et(t){return Array.isArray(t)&&t[Uf]===!0}function Bf(t){return(t.flags&4)!==0}function ic(t){return t.componentOffset>-1}function $f(t){return(t.flags&1)===1}function _r(t){return!!t.template}function Da(t){return(t[I]&512)!==0}var Ca=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Hf(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Wf(){return zf}function zf(t){return t.type.prototype.ngOnChanges&&(t.setInput=T_),b_}Wf.ngInherit=!0;function b_(){let t=qf(this),e=t?.current;if(e){let n=t.previous;if(n===lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function T_(t,e,n,r,i){let s=this.declaredInputs[r],o=qf(t)||S_(t,{previous:lr,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ca(l&&l.currentValue,n,c===lr),Hf(t,e,i,n)}var Gf="__ngSimpleChanges__";function qf(t){return t[Gf]||null}function S_(t,e){return t[Gf]=e}var Qd=null;var ht=function(t,e,n){Qd?.(t,e,n)},N_="svg",A_="math";function vt(t){for(;Array.isArray(t);)t=t[Xe];return t}function je(t,e){return vt(e[t.index])}function Yf(t,e){return t.data[e]}function Er(t,e){let n=e[t];return kt(n)?n:n[Xe]}function M_(t){return(t[I]&4)===4}function sc(t){return(t[I]&128)===128}function R_(t){return et(t[te])}function rs(t,e){return e==null?null:t[e]}function Kf(t){t[vn]=0}function Qf(t){t[I]&1024||(t[I]|=1024,sc(t)&&Is(t))}function hr(t){return!!(t[I]&9216||t[me]?.dirty)}function ba(t){t[Ye].changeDetectionScheduler?.notify(7),t[I]&64&&(t[I]|=1024),hr(t)&&Is(t)}function Is(t){t[Ye].changeDetectionScheduler?.notify(0);let e=Vt(t);for(;e!==null&&!(e[I]&8192||(e[I]|=8192,!sc(e)));)e=Vt(e)}function Zf(t,e){if((t[I]&256)===256)throw new P(911,!1);t[pt]===null&&(t[pt]=[]),t[pt].push(e)}function x_(t,e){if(t[pt]===null)return;let n=t[pt].indexOf(e);n!==-1&&t[pt].splice(n,1)}function Vt(t){let e=t[te];return et(e)?e[te]:e}var k={lFrame:oh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Jf=!1;function P_(){return k.lFrame.elementDepthCount}function O_(){k.lFrame.elementDepthCount++}function k_(){k.lFrame.elementDepthCount--}function Xf(){return k.bindingsEnabled}function L_(){return k.skipHydrationRootTNode!==null}function F_(t){return k.skipHydrationRootTNode===t}function j_(){k.skipHydrationRootTNode=null}function ne(){return k.lFrame.lView}function Wt(){return k.lFrame.tView}function tt(){let t=eh();for(;t!==null&&t.type===64;)t=t.parent;return t}function eh(){return k.lFrame.currentTNode}function V_(){let t=k.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ir(t,e){let n=k.lFrame;n.currentTNode=t,n.isParent=e}function th(){return k.lFrame.isParent}function U_(){k.lFrame.isParent=!1}function nh(){return Jf}function Zd(t){Jf=t}function B_(t){return k.lFrame.bindingIndex=t}function $_(){return k.lFrame.bindingIndex++}function H_(){return k.lFrame.inI18n}function W_(t,e){let n=k.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ta(e)}function z_(){return k.lFrame.currentDirectiveIndex}function Ta(t){k.lFrame.currentDirectiveIndex=t}function rh(){return k.lFrame.currentQueryIndex}function oc(t){k.lFrame.currentQueryIndex=t}function G_(t){let e=t[C];return e.type===2?e.declTNode:e.type===1?t[be]:null}function ih(t,e,n){if(n&R.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&R.Host);)if(i=G_(s),i===null||(s=s[vr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=k.lFrame=sh();return r.currentTNode=e,r.lView=t,!0}function ac(t){let e=sh(),n=t[C];k.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sh(){let t=k.lFrame,e=t===null?null:t.child;return e===null?oh(t):e}function oh(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ah(){let t=k.lFrame;return k.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ch=ah;function cc(){let t=ah();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function q_(){return k.lFrame.selectedIndex}function Ut(t){k.lFrame.selectedIndex=t}function Y_(){let t=k.lFrame;return Yf(t.tView,t.selectedIndex)}function K_(){return k.lFrame.currentNamespace}var lh=!0;function lc(){return lh}function uc(t){lh=t}function Q_(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=zf(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function dc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Gi(t,e,n){uh(t,e,3,n)}function qi(t,e,n,r){(t[I]&3)===n&&uh(t,e,n,r)}function ca(t,e){let n=t[I];(n&3)===e&&(n&=16383,n+=1,t[I]=n)}function uh(t,e,n,r){let i=r!==void 0?t[vn]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[vn]+=65536),(a<s||s==-1)&&(Z_(t,n,e,c),t[vn]=(t[vn]&4294901760)+c+2),c++}function Jd(t,e){ht(4,t,e);let n=V(null);try{e.call(t)}finally{V(n),ht(5,t,e)}}function Z_(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[I]>>14<t[vn]>>16&&(t[I]&3)===e&&(t[I]+=16384,Jd(a,s)):Jd(a,s)}var In=-1,pr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function J_(t){return t instanceof pr}function X_(t){return(t.flags&8)!==0}function eE(t){return(t.flags&16)!==0}var la={},Sa=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ys(r);let i=this.injector.get(e,la,r);return i!==la||n===la?i:this.parentInjector.get(e,n,r)}};function dh(t){return t!==In}function is(t){return t&32767}function tE(t){return t>>16}function ss(t,e){let n=tE(t),r=e;for(;n>0;)r=r[vr],n--;return r}var Na=!0;function Xd(t){let e=Na;return Na=t,e}var nE=256,fh=nE-1,hh=5,rE=0,Oe={};function iE(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(or)&&(r=n[or]),r==null&&(r=n[or]=rE++);let i=r&fh,s=1<<i;e.data[t+(i>>hh)]|=s}function ph(t,e){let n=gh(t,e);if(n!==-1)return n;let r=e[C];r.firstCreatePass&&(t.injectorIndex=e.length,ua(r.data,t),ua(e,null),ua(r.blueprint,null));let i=fc(t,e),s=t.injectorIndex;if(dh(i)){let o=is(i),a=ss(i,e),c=a[C].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function ua(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gh(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function fc(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Eh(i),r===null)return In;if(n++,i=i[vr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return In}function sE(t,e,n){iE(t,e,n)}function mh(t,e,n){if(n&R.Optional||t!==void 0)return t;Ja(e,"NodeInjector")}function yh(t,e,n,r){if(n&R.Optional&&r===void 0&&(r=null),!(n&(R.Self|R.Host))){let i=t[Dn],s=pe(void 0);try{return i?i.get(e,r,n&R.Optional):Df(e,r,n&R.Optional)}finally{pe(s)}}return mh(r,e,n)}function vh(t,e,n,r=R.Default,i){if(t!==null){if(e[I]&2048&&!(r&R.Self)){let o=lE(t,e,n,r,Oe);if(o!==Oe)return o}let s=_h(t,e,n,r,Oe);if(s!==Oe)return s}return yh(e,n,r,i)}function _h(t,e,n,r,i){let s=aE(n);if(typeof s=="function"){if(!ih(e,t,r))return r&R.Host?mh(i,n,r):yh(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&R.Optional))Ja(n);else return o}finally{ch()}}else if(typeof s=="number"){let o=null,a=gh(t,e),c=In,l=r&R.Host?e[Ke][be]:null;for((a===-1||r&R.SkipSelf)&&(c=a===-1?fc(t,e):e[a+8],c===In||!tf(r,!1)?a=-1:(o=e[C],a=is(c),e=ss(c,e)));a!==-1;){let d=e[C];if(ef(s,a,d.data)){let u=oE(a,e,n,o,r,l);if(u!==Oe)return u}c=e[a+8],c!==In&&tf(r,e[C].data[a+8]===l)&&ef(s,a,e)?(o=d,a=is(c),e=ss(c,e)):a=-1}}return i}function oE(t,e,n,r,i,s){let o=e[C],a=o.data[t+8],c=r==null?ic(a)&&Na:r!=o&&(a.type&3)!==0,l=i&R.Host&&s===a,d=Yi(a,o,n,c,l);return d!==null?bn(e,o,d,a):Oe}function Yi(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,u=r?a:a+d,h=i?a+d:l;for(let f=u;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&_r(f)&&f.type===n)return c}return null}function bn(t,e,n,r){let i=t[n],s=e.data;if(J_(i)){let o=i;o.resolving&&Lv(kv(s[n]));let a=Xd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?pe(o.injectImpl):null,d=ih(t,r,R.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Q_(n,s[n],e)}finally{l!==null&&pe(l),Xd(a),o.resolving=!1,ch()}}return i}function aE(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(or)?t[or]:void 0;return typeof e=="number"?e>=0?e&fh:cE:e}function ef(t,e,n){let r=1<<t;return!!(n[e+(t>>hh)]&r)}function tf(t,e){return!(t&R.Self)&&!(t&R.Host&&e)}var Lt=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vh(this._tNode,this._lView,e,ys(r),n)}};function cE(){return new Lt(tt(),ne())}function lE(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[I]&2048&&!(o[I]&512);){let a=_h(s,o,n,r|R.Self,Oe);if(a!==Oe)return a;let c=s.parent;if(!c){let l=o[Vf];if(l){let d=l.get(n,Oe,r);if(d!==Oe)return d}c=Eh(o),o=o[vr]}s=c}return i}function Eh(t){let e=t[C],n=e.type;return n===2?e.declTNode:n===1?t[be]:null}function nf(t,e=null,n=null,r){let i=uE(t,e,n,r);return i.resolveInjectorInitializers(),i}function uE(t,e=null,n=null,r,i=new Set){let s=[n||Pe,f_(t)];return r=r||(typeof t=="object"?void 0:ge(t)),new dr(s,e||rc(),r||null,i)}var Ot=class Ot{static create(e,n){if(Array.isArray(e))return nf({name:""},n,e,"");{let r=e.name??"";return nf({name:r},e.parent,e.providers,r)}}};Ot.THROW_IF_NOT_FOUND=ar,Ot.NULL=new Xi,Ot.\u0275prov=L({token:Ot,providedIn:"any",factory:()=>D(bf)}),Ot.__NG_ELEMENT_ID__=-1;var Ze=Ot;var dE=new b("");dE.__NG_ELEMENT_ID__=t=>{let e=tt();if(e===null)throw new P(204,!1);if(e.type&2)return e.value;if(t&R.Optional)return null;throw new P(204,!1)};var fE="ngOriginalError";function da(t){return t[fE]}var Ih=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hE,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Aa=class extends Ih{constructor(e){super(),this._lView=e}onDestroy(e){return Zf(this._lView,e),()=>x_(this._lView,e)}};function hE(){return new Aa(ne())}var An=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=L({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Ma=class extends lt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,D_()&&(this.destroyRef=x(Ih,{optional:!0})??void 0,this.pendingTasks=x(An,{optional:!0})??void 0)}emit(e){let n=V(null);try{super.next(e)}finally{V(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof J&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ke=Ma;function os(...t){}function wh(t){let e,n;function r(){t=os;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function rf(t){return queueMicrotask(()=>t()),()=>{t=os}}var hc="isAngularZone",as=hc+"_ID",pE=0,W=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ke(!1),this.onMicrotaskEmpty=new ke(!1),this.onStable=new ke(!1),this.onError=new ke(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,yE(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hc)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new P(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,gE,os,os);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gE={};function pc(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mE(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{wh(()=>{t.callbackScheduled=!1,Ra(t),t.isCheckStableRunning=!0,pc(t),t.isCheckStableRunning=!1})}),Ra(t))}function yE(t){let e=()=>{mE(t)},n=pE++;t._inner=t._inner.fork({name:"angular",properties:{[hc]:!0,[as]:n,[as+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(vE(c))return r.invokeTask(s,o,a,c);try{return sf(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),of(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return sf(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!_E(c)&&e(),of(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ra(t),pc(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ra(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function of(t){t._nesting--,pc(t)}var xa=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ke,this.onMicrotaskEmpty=new ke,this.onStable=new ke,this.onError=new ke}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function vE(t){return Dh(t,"__ignore_ng_zone__")}function _E(t){return Dh(t,"__scheduler_tick__")}function Dh(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var _t=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&da(e);for(;n&&da(n);)n=da(n);return n||null}},EE=new b("",{providedIn:"root",factory:()=>{let t=x(W),e=x(_t);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function IE(){return Mn(tt(),ne())}function Mn(t,e){return new Rn(je(t,e))}var Rn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=IE;let t=e;return t})();function wE(t){return t instanceof Rn?t.nativeElement:t}function DE(){return this._results[Symbol.iterator]()}var Pa=class t{get changes(){return this._changes??=new ke}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=DE)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Yv(e);(this._changesDetected=!qv(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Ch(t){return(t.flags&128)===128}var bh=new Map,CE=0;function bE(){return CE++}function TE(t){bh.set(t[Es],t)}function SE(t){bh.delete(t[Es])}var af="__ngContext__";function Bt(t,e){kt(e)?(t[af]=e[Es],TE(e)):t[af]=e}function Th(t){return Nh(t[fr])}function Sh(t){return Nh(t[Ce])}function Nh(t){for(;t!==null&&!et(t);)t=t[Ce];return t}var Oa;function Ah(t){Oa=t}function NE(){if(Oa!==void 0)return Oa;if(typeof document<"u")return document;throw new P(210,!1)}var gc=new b("",{providedIn:"root",factory:()=>AE}),AE="ng",mc=new b(""),Ve=new b("",{providedIn:"platform",factory:()=>"unknown"});var yc=new b("",{providedIn:"root",factory:()=>NE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ME="h",RE="b";var xE=()=>null;function vc(t,e,n=!1){return xE(t,e,n)}var Mh=!1,PE=new b("",{providedIn:"root",factory:()=>Mh});var zt=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zt||{}),OE;function _c(t,e){return OE(t,e)}function _n(t,e,n,r,i){if(r!=null){let s,o=!1;et(r)?s=r:kt(r)&&(o=!0,r=r[Xe]);let a=vt(r);t===0&&n!==null?i==null?kh(e,n,a):cs(e,n,a,i||null,!0):t===1&&n!==null?cs(e,n,a,i||null,!0):t===2?YE(e,a,o):t===3&&e.destroyNode(a),s!=null&&QE(e,t,s,n,i)}}function kE(t,e){return t.createText(e)}function Rh(t,e,n){return t.createElement(e,n)}function LE(t,e){xh(t,e),e[Xe]=null,e[be]=null}function FE(t,e,n,r,i,s){r[Xe]=i,r[be]=e,ws(t,r,n,1,i,s)}function xh(t,e){e[Ye].changeDetectionScheduler?.notify(8),ws(t,e,e[ye],2,null,null)}function jE(t){let e=t[fr];if(!e)return fa(t[C],t);for(;e;){let n=null;if(kt(e))n=e[fr];else{let r=e[ue];r&&(n=r)}if(!n){for(;e&&!e[Ce]&&e!==t;)kt(e)&&fa(e[C],e),e=e[te];e===null&&(e=t),kt(e)&&fa(e[C],e),n=e&&e[Ce]}e=n}}function VE(t,e,n,r){let i=ue+r,s=n.length;r>0&&(n[i-1][Ce]=e),r<s-ue?(e[Ce]=n[i],Cf(n,ue+r,e)):(n.push(e),e[Ce]=null),e[te]=n;let o=e[Ft];o!==null&&n!==o&&Ph(o,e);let a=e[Qe];a!==null&&a.insertView(t),ba(e),e[I]|=128}function Ph(t,e){let n=t[Cn],r=e[te];if(kt(r))t[I]|=ns.HasTransplantedViews;else{let i=r[te][Ke];e[Ke]!==i&&(t[I]|=ns.HasTransplantedViews)}n===null?t[Cn]=[e]:n.push(e)}function Ec(t,e){let n=t[Cn],r=n.indexOf(e);n.splice(r,1)}function ka(t,e){if(t.length<=ue)return;let n=ue+e,r=t[n];if(r){let i=r[Ft];i!==null&&i!==t&&Ec(i,r),e>0&&(t[n-1][Ce]=r[Ce]);let s=Ji(t,ue+e);LE(r[C],r);let o=s[Qe];o!==null&&o.detachView(s[C]),r[te]=null,r[Ce]=null,r[I]&=-129}return r}function Oh(t,e){if(!(e[I]&256)){let n=e[ye];n.destroyNode&&ws(t,e,n,3,null,null),jE(e)}}function fa(t,e){if(e[I]&256)return;let n=V(null);try{e[I]&=-129,e[I]|=256,e[me]&&Bo(e[me]),BE(t,e),UE(t,e),e[C].type===1&&e[ye].destroy();let r=e[Ft];if(r!==null&&et(e[te])){r!==e[te]&&Ec(r,e);let i=e[Qe];i!==null&&i.detachView(t)}SE(e)}finally{V(n)}}function UE(t,e){let n=t.cleanup,r=e[wa];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[wa]=null);let i=e[pt];if(i!==null){e[pt]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function BE(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof pr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ht(4,a,c);try{c.call(a)}finally{ht(5,a,c)}}else{ht(4,i,s);try{s.call(i)}finally{ht(5,i,s)}}}}}function $E(t,e,n){return HE(t,e.parent,n)}function HE(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Xe];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Le.None||s===Le.Emulated)return null}return je(r,n)}}function cs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function kh(t,e,n){t.appendChild(e,n)}function cf(t,e,n,r,i){r!==null?cs(t,e,n,r,i):kh(t,e,n)}function Lh(t,e){return t.parentNode(e)}function WE(t,e){return t.nextSibling(e)}function zE(t,e,n){return qE(t,e,n)}function GE(t,e,n){return t.type&40?je(t,n):null}var qE=GE,lf;function Ic(t,e,n,r){let i=$E(t,r,e),s=e[ye],o=r.parent||e[be],a=zE(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)cf(s,i,n[c],a,!1);else cf(s,i,n,a,!1);lf!==void 0&&lf(s,r,e,n,i)}function sr(t,e){if(e!==null){let n=e.type;if(n&3)return je(e,t);if(n&4)return La(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return sr(t,r);{let i=t[e.index];return et(i)?La(-1,i):vt(i)}}else{if(n&128)return sr(t,e.next);if(n&32)return _c(e,t)()||vt(t[e.index]);{let r=Fh(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vt(t[Ke]);return sr(i,r)}else return sr(t,e.next)}}}return null}function Fh(t,e){if(e!==null){let r=t[Ke][be],i=e.projection;return r.projection[i]}return null}function La(t,e){let n=ue+t+1;if(n<e.length){let r=e[n],i=r[C].firstChild;if(i!==null)return sr(r,i)}return e[jt]}function YE(t,e,n){t.removeChild(null,e,n)}function wc(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Bt(vt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)wc(t,e,n.child,r,i,s,!1),_n(e,t,i,a,s);else if(c&32){let l=_c(n,r),d;for(;d=l();)_n(e,t,i,d,s);_n(e,t,i,a,s)}else c&16?KE(t,e,r,n,i,s):_n(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ws(t,e,n,r,i,s){wc(n,r,t.firstChild,e,i,s,!1)}function KE(t,e,n,r,i,s){let o=n[Ke],c=o[be].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];_n(e,t,i,d,s)}else{let l=c,d=o[te];Ch(r)&&(l.flags|=128),wc(t,e,l,d,i,s,!0)}}function QE(t,e,n,r,i){let s=n[jt],o=vt(n);s!==o&&_n(e,t,r,s,i);for(let a=ue;a<n.length;a++){let c=n[a];ws(c[C],c,t,e,r,s)}}function ZE(t,e,n){t.setAttribute(e,"style",n)}function jh(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Vh(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&ya(t,e,r),i!==null&&jh(t,e,i),s!==null&&ZE(t,e,s)}var Uh={};function JE(t,e,n,r){if(!r)if((e[I]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Gi(e,s,n)}else{let s=t.preOrderHooks;s!==null&&qi(e,s,0,n)}Ut(n)}function xn(t,e=R.Default){let n=ne();if(n===null)return D(t,e);let r=tt();return vh(r,n,De(t),e)}function Bh(t,e,n,r,i,s){let o=V(null);try{let a=null;i&gt.SignalBased&&(a=e[r][fd]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&gt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Hf(e,a,r,s)}finally{V(o)}}function XE(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ut(~i);else{let s=i,o=n[++r],a=n[++r];W_(o,s);let c=e[s];a(2,c)}}}finally{Ut(-1)}}function Ds(t,e,n,r,i,s,o,a,c,l,d){let u=e.blueprint.slice();return u[Xe]=i,u[I]=r|4|128|8|64,(l!==null||t&&t[I]&2048)&&(u[I]|=2048),Kf(u),u[te]=u[vr]=t,u[mt]=n,u[Ye]=o||t&&t[Ye],u[ye]=a||t&&t[ye],u[Dn]=c||t&&t[Dn]||null,u[be]=s,u[Es]=bE(),u[es]=d,u[Vf]=l,u[Ke]=e.type==2?t[Ke]:u,u}function Cs(t,e,n,r,i){let s=t.data[e];if(s===null)s=eI(t,e,n,r,i),H_()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=V_();s.injectorIndex=o===null?-1:o.injectorIndex}return Ir(s,!0),s}function eI(t,e,n,r,i){let s=eh(),o=th(),a=o?s:s&&s.parent,c=t.data[e]=oI(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function $h(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Hh(t,e,n,r,i){let s=q_(),o=r&2;try{Ut(-1),o&&e.length>yt&&JE(t,e,yt,!1),ht(o?2:0,i),n(r,i)}finally{Ut(s),ht(o?3:1,i)}}function Wh(t,e,n){if(Bf(e)){let r=V(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{V(r)}}}function zh(t,e,n){Xf()&&(hI(t,e,n,je(n,e)),(n.flags&64)===64&&Qh(t,e,n))}function Gh(t,e,n=je){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function qh(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Dc(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Dc(t,e,n,r,i,s,o,a,c,l,d){let u=yt+r,h=u+i,f=tI(u,h),p=typeof l=="function"?l():l;return f[C]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:d}}function tI(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Uh);return n}function nI(t,e,n,r){let s=r.get(PE,Mh)||n===Le.ShadowDom,o=t.selectRootElement(e,s);return rI(o),o}function rI(t){iI(t)}var iI=()=>null;function sI(t,e,n,r){let i=DI(e);i.push(n),t.firstCreatePass&&CI(t).push(r,i.length-1)}function oI(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return L_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uf(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=gt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?df(r,n,l,a,c):df(r,n,l,a)}return r}function df(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function aI(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let u=s[d],h=n?n.get(u):null,f=h?h.inputs:null,p=h?h.outputs:null;c=uf(0,u.inputs,d,c,f),l=uf(1,u.outputs,d,l,p);let g=c!==null&&o!==null&&!tc(e)?wI(c,d,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function cI(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function lI(t,e,n,r,i,s,o,a){let c=je(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Cc(t,n,d,r,i),ic(e)&&uI(n,e.index)):e.type&3?(r=cI(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function uI(t,e){let n=Er(e,t);n[I]&16||(n[I]|=64)}function Yh(t,e,n,r){if(Xf()){let i=r===null?null:{"":-1},s=gI(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Kh(t,e,n,o,i,a),i&&mI(n,r,i)}n.mergedAttrs=ec(n.mergedAttrs,n.attrs)}function Kh(t,e,n,r,i,s){for(let l=0;l<r.length;l++)sE(ph(n,e),t,r[l].type);vI(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=$h(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=ec(n.mergedAttrs,d.hostAttrs),_I(t,n,e,c,d),yI(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let u=d.type.prototype;!o&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}aI(t,n,s)}function dI(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;fI(o)!=a&&o.push(a),o.push(n,r,s)}}function fI(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function hI(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ic(n)&&EI(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ph(n,e),Bt(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=bn(e,t,a,n);if(Bt(l,e),o!==null&&II(e,a-i,l,c,n,o),_r(c)){let d=Er(n.index,e);d[mt]=bn(e,t,a,n)}}}function Qh(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=z_();try{Ut(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ta(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&pI(c,l)}}finally{Ut(-1),Ta(o)}}function pI(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function gI(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(n_(e,o.selectors,!1))if(r||(r=[]),_r(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Fa(t,e,c)}else r.unshift(o),Fa(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Fa(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mI(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new P(-301,!1);r.push(e[i],s)}}}function yI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_r(e)&&(n[""]=t)}}function vI(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function _I(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=cr(i.type,!0)),o=new pr(s,_r(i),xn);t.blueprint[r]=o,n[r]=o,dI(t,e,r,$h(t,n,i.hostVars,Uh),i)}function EI(t,e,n){let r=je(e,t),i=qh(n),s=t[Ye].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=bs(t,Ds(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function II(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],u=o[a++];Bh(r,n,c,l,d,u)}}function wI(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Zh(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Jh(t,e){let n=t.contentQueries;if(n!==null){let r=V(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];oc(s),a.contentQueries(2,e[o],o)}}}finally{V(r)}}}function bs(t,e){return t[fr]?t[Kd][Ce]=e:t[fr]=e,t[Kd]=e,e}function ja(t,e,n){oc(0);let r=V(null);try{e(t,n)}finally{V(r)}}function DI(t){return t[wa]??=[]}function CI(t){return t.cleanup??=[]}function bI(t,e){let n=t[Dn],r=n?n.get(_t,null):null;r&&r.handleError(e)}function Cc(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];Bh(d,l,r,a,c,i)}}function TI(t,e){let n=Er(e,t),r=n[C];SI(r,n);let i=n[Xe];i!==null&&n[es]===null&&(n[es]=vc(i,n[Dn])),bc(r,n,n[mt])}function SI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bc(t,e,n){ac(e);try{let r=t.viewQuery;r!==null&&ja(1,r,n);let i=t.template;i!==null&&Hh(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Qe]?.finishViewCreation(t),t.staticContentQueries&&Jh(t,e),t.staticViewQueries&&ja(2,t.viewQuery,n);let s=t.components;s!==null&&NI(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[I]&=-5,cc()}}function NI(t,e){for(let n=0;n<e.length;n++)TI(t,e[n])}function AI(t,e,n,r){let i=V(null);try{let s=e.tView,a=t[I]&4096?4096:16,c=Ds(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ft]=l;let d=t[Qe];return d!==null&&(c[Qe]=d.createEmbeddedView(s)),bc(s,c,n),c}finally{V(i)}}function ff(t,e){return!e||e.firstChild===null||Ch(t)}function MI(t,e,n,r=!0){let i=e[C];if(VE(i,e,t,n),r){let o=La(n,t),a=e[ye],c=Lh(a,t[jt]);c!==null&&FE(i,t[be],a,e,c,o)}let s=e[es];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ls(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(vt(s)),et(s)&&RI(s,r);let o=n.type;if(o&8)ls(t,e,n.child,r);else if(o&32){let a=_c(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Fh(e,n);if(Array.isArray(a))r.push(...a);else{let c=Vt(e[Ke]);ls(c[C],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function RI(t,e){for(let n=ue;n<t.length;n++){let r=t[n],i=r[C].firstChild;i!==null&&ls(r[C],r,i,e)}t[jt]!==t[Xe]&&e.push(t[jt])}var Xh=[];function xI(t){return t[me]??PI(t)}function PI(t){let e=Xh.pop()??Object.create(kI);return e.lView=t,e}function OI(t){t.lView[me]!==t&&(t.lView=null,Xh.push(t))}var kI=Re(le({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Is(t.lView)},consumerOnSignalRead(){this.lView[me]=this}});function LI(t){let e=t[me]??Object.create(FI);return e.lView=t,e}var FI=Re(le({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Vt(t.lView);for(;e&&!ep(e[C]);)e=Vt(e);e&&Qf(e)},consumerOnSignalRead(){this.lView[me]=this}});function ep(t){return t.type!==2}var jI=100;function tp(t,e=!0,n=0){let r=t[Ye],i=r.rendererFactory,s=!1;s||i.begin?.();try{VI(t,n)}catch(o){throw e&&bI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function VI(t,e){let n=nh();try{Zd(!0),Va(t,e);let r=0;for(;hr(t);){if(r===jI)throw new P(103,!1);r++,Va(t,1)}}finally{Zd(n)}}function UI(t,e,n,r){let i=e[I];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Ye].inlineEffectRunner?.flush(),ac(e);let a=!0,c=null,l=null;s||(ep(t)?(l=xI(e),c=Vo(l)):hd()===null?(a=!1,l=LI(e),c=Vo(l)):e[me]&&(Bo(e[me]),e[me]=null));try{Kf(e),B_(t.bindingStartIndex),n!==null&&Hh(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let f=t.preOrderCheckHooks;f!==null&&Gi(e,f,null)}else{let f=t.preOrderHooks;f!==null&&qi(e,f,0,null),ca(e,0)}if(o||BI(e),np(e,0),t.contentQueries!==null&&Jh(t,e),!s)if(d){let f=t.contentCheckHooks;f!==null&&Gi(e,f)}else{let f=t.contentHooks;f!==null&&qi(e,f,1),ca(e,1)}XE(t,e);let u=t.components;u!==null&&ip(e,u,0);let h=t.viewQuery;if(h!==null&&ja(2,h,r),!s)if(d){let f=t.viewCheckHooks;f!==null&&Gi(e,f)}else{let f=t.viewHooks;f!==null&&qi(e,f,2),ca(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[aa]){for(let f of e[aa])f();e[aa]=null}s||(e[I]&=-73)}catch(d){throw s||Is(e),d}finally{l!==null&&(pd(l,c),a&&OI(l)),cc()}}function np(t,e){for(let n=Th(t);n!==null;n=Sh(n))for(let r=ue;r<n.length;r++){let i=n[r];rp(i,e)}}function BI(t){for(let e=Th(t);e!==null;e=Sh(e)){if(!(e[I]&ns.HasTransplantedViews))continue;let n=e[Cn];for(let r=0;r<n.length;r++){let i=n[r];Qf(i)}}}function $I(t,e,n){let r=Er(e,t);rp(r,n)}function rp(t,e){sc(t)&&Va(t,e)}function Va(t,e){let r=t[C],i=t[I],s=t[me],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Uo(s)),o||=!1,s&&(s.dirty=!1),t[I]&=-9217,o)UI(r,t,r.template,t[mt]);else if(i&8192){np(t,1);let a=r.components;a!==null&&ip(t,a,1)}}function ip(t,e,n){for(let r=0;r<e.length;r++)$I(t,e[r],n)}function sp(t,e){let n=nh()?64:1088;for(t[Ye].changeDetectionScheduler?.notify(e);t;){t[I]|=n;let r=Vt(t);if(Da(t)&&!r)return t;t=r}return null}var gr=class{get rootNodes(){let e=this._lView,n=e[C];return ls(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mt]}set context(e){this._lView[mt]=e}get destroyed(){return(this._lView[I]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[te];if(et(e)){let n=e[ts],r=n?n.indexOf(this):-1;r>-1&&(ka(e,r),Ji(n,r))}this._attachedToViewContainer=!1}Oh(this._lView[C],this._lView)}onDestroy(e){Zf(this._lView,e)}markForCheck(){sp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[I]&=-129}reattach(){ba(this._lView),this._lView[I]|=128}detectChanges(){this._lView[I]|=1024,tp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Da(this._lView),n=this._lView[Ft];n!==null&&!e&&Ec(n,this._lView),xh(this._lView[C],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=e;let n=Da(this._lView),r=this._lView[Ft];r!==null&&!n&&Ph(r,this._lView),ba(this._lView)}},Tn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zI;let t=e;return t})(),HI=Tn,WI=class extends HI{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=AI(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new gr(i)}};function zI(){return Tc(tt(),ne())}function Tc(t,e){return t.type&4?new WI(e,t,Mn(t,e)):null}var kx=new RegExp(`^(\\d+)*(${RE}|${ME})*(.*)`);var GI=()=>null;function hf(t,e){return GI(t,e)}var mr=class{},op=new b("",{providedIn:"root",factory:()=>!1});var ap=new b(""),Ua=class{},us=class{};function qI(t){let e=Error(`No component factory found for ${ge(t)}.`);return e[YI]=t,e}var YI="ngComponent";var Ba=class{resolveComponentFactory(e){throw qI(e)}},Oc=class Oc{};Oc.NULL=new Ba;var yr=Oc,Sn=class{};var KI=(()=>{let e=class e{};e.\u0275prov=L({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var pf=new Set;function Sc(t){pf.has(t)||(pf.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var cp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=L({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function $a(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jd(i,a);else if(s==2){let c=a,l=e[++o];r=jd(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ha=class extends yr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wn(e);return new ds(n,this.ngModule)}};function gf(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:gt.None;e?n.push({propName:o,templateName:r,isSignal:(a&gt.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function QI(t){let e=t.toLowerCase();return e==="svg"?N_:e==="math"?A_:null}var ds=class extends us{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=gf(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gf(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=o_(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=V(null);try{i=i||this.ngModule;let o=i instanceof Fe?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Sa(e,o):e,c=a.get(Sn,null);if(c===null)throw new P(407,!1);let l=a.get(KI,null),d=a.get(cp,null),u=a.get(mr,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?nI(f,r,this.componentDef.encapsulation,a):Rh(f,p,QI(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let _=null;g!==null&&(_=vc(g,a,!0));let E=Dc(0,null,null,1,0,null,null,null,null,null,null),O=Ds(null,E,null,m,null,null,h,f,a,null,_);ac(O);let T,X;try{let G=this.componentDef,Z,Ee=null;G.findHostDirectiveDefs?(Z=[],Ee=new Map,G.findHostDirectiveDefs(G,Z,Ee),Z.push(G)):Z=[G];let Ge=ZI(O,g),qe=JI(Ge,g,G,Z,O,h,f);X=Yf(E,yt),g&&tw(f,G,g,r),n!==void 0&&nw(X,this.ngContentSelectors,n),T=ew(qe,G,Z,Ee,O,[rw]),bc(E,O,null)}finally{cc()}return new Wa(this.componentType,T,Mn(X,O),O,X)}finally{V(s)}}},Wa=class extends Ua{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Cc(s[C],s,i,e,n),this.previousInputValues.set(e,n);let o=Er(this._tNode.index,s);sp(o,1)}}get injector(){return new Lt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZI(t,e){let n=t[C],r=yt;return t[r]=e,Cs(n,r,2,"#host",null)}function JI(t,e,n,r,i,s,o){let a=i[C];XI(r,t,e,o);let c=null;e!==null&&(c=vc(e,i[Dn]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let u=Ds(i,qh(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Fa(a,t,r.length-1),bs(i,u),i[t.index]=u}function XI(t,e,n,r){for(let i of t)e.mergedAttrs=ec(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&($a(e,e.mergedAttrs,!0),n!==null&&Vh(r,n,e))}function ew(t,e,n,r,i,s){let o=tt(),a=i[C],c=je(o,i);Kh(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let u=o.directiveStart+d,h=bn(i,a,u,o);Bt(h,i)}Qh(a,i,o),c&&Bt(c,i);let l=bn(i,a,o.directiveStart+o.componentOffset,o);if(t[mt]=i[mt]=l,s!==null)for(let d of s)d(l,e);return Wh(a,o,i),l}function tw(t,e,n,r){if(r)ya(t,n,["ng-version","18.2.0"]);else{let{attrs:i,classes:s}=a_(e.selectors[0]);i&&ya(t,n,i),s&&s.length>0&&jh(t,n,s.join(" "))}}function nw(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function rw(){let t=tt();dc(ne()[C],t)}var wr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=iw;let t=e;return t})();function iw(){let t=tt();return up(t,ne())}var sw=wr,lp=class extends sw{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Mn(this._hostTNode,this._hostLView)}get injector(){return new Lt(this._hostTNode,this._hostLView)}get parentInjector(){let e=fc(this._hostTNode,this._hostLView);if(dh(e)){let n=ss(e,this._hostLView),r=is(e),i=n[C].data[r+8];return new Lt(i,n)}else return new Lt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mf(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ue}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=hf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,ff(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!C_(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new ds(wn(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(Fe,null);g&&(s=g)}let d=wn(c.componentType??{}),u=hf(this._lContainer,d?.id??null),h=u?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,ff(this._hostTNode,u)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(R_(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[te],l=new lp(c,c[be],c[te]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return MI(o,i,s,r),e.attachToViewContainerRef(),Cf(ha(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mf(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ka(this._lContainer,n);r&&(Ji(ha(this._lContainer),n),Oh(r[C],r))}detach(e){let n=this._adjustIndex(e,-1),r=ka(this._lContainer,n);return r&&Ji(ha(this._lContainer),n)!=null?new gr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mf(t){return t[ts]}function ha(t){return t[ts]||(t[ts]=[])}function up(t,e){let n,r=e[t.index];return et(r)?n=r:(n=Zh(r,e,null,t),e[t.index]=n,bs(e,n)),aw(n,e,t,r),new lp(n,t,e)}function ow(t,e){let n=t[ye],r=n.createComment(""),i=je(e,t),s=Lh(n,i);return cs(n,s,r,WE(n,i),!1),r}var aw=uw,cw=()=>!1;function lw(t,e,n){return cw(t,e,n)}function uw(t,e,n,r){if(t[jt])return;let i;n.type&8?i=vt(r):i=ow(e,n),t[jt]=i}var za=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ga=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Nc(e,n).matches!==null&&this.queries[n].setDirty()}},qa=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=vw(e):this.predicate=e}},Ya=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ka=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,dw(n,s)),this.matchTNodeWithReadOption(e,n,Yi(n,e,s,!1,!1))}else r===Tn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Yi(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Rn||i===wr||i===Tn&&n.type&4)this.addMatch(n.index,-2);else{let s=Yi(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function dw(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function fw(t,e){return t.type&11?Mn(t,e):t.type&4?Tc(t,e):null}function hw(t,e,n,r){return n===-1?fw(e,t):n===-2?pw(t,e,r):bn(t,t[C],n,e)}function pw(t,e,n){if(n===Rn)return Mn(e,t);if(n===Tn)return Tc(e,t);if(n===wr)return up(e,t)}function dp(t,e,n,r){let i=e[Qe].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(hw(e,d,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Qa(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=dp(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let u=ue;u<d.length;u++){let h=d[u];h[Ft]===h[te]&&Qa(h[C],h,l,r)}if(d[Cn]!==null){let u=d[Cn];for(let h=0;h<u.length;h++){let f=u[h];Qa(f[C],f,l,r)}}}}}return r}function gw(t,e){return t[Qe].queries[e].queryList}function mw(t,e,n){let r=new Pa((n&4)===4);return sI(t,e,r,r.destroy),(e[Qe]??=new Ga).queries.push(new za(r))-1}function yw(t,e,n){let r=Wt();return r.firstCreatePass&&(_w(r,new qa(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),mw(r,ne(),e)}function vw(t){return t.split(",").map(e=>e.trim())}function _w(t,e,n){t.queries===null&&(t.queries=new Ya),t.queries.track(new Ka(e,n))}function Nc(t,e){return t.queries.getByIndex(e)}function Ew(t,e){let n=t[C],r=Nc(n,e);return r.crossesNgTemplate?Qa(n,t,e,[]):dp(n,t,r,e)}var Nn=class{};var fs=class extends Nn{constructor(e){super(),this.componentFactoryResolver=new Ha(this),this.instance=null;let n=new dr([...e.providers,{provide:Nn,useValue:this},{provide:yr,useValue:this.componentFactoryResolver}],e.parent||rc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Iw(t,e,n=null){return new fs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function ww(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Dw(t){return(t.flags&32)===32}function Cw(t,e,n,r,i,s,o,a,c){let l=e.consts,d=Cs(e,t,4,o||null,a||null);Yh(e,n,d,rs(l,c)),dc(e,d);let u=d.tView=Dc(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}function bw(t,e,n,r,i,s,o,a,c,l){let d=n+yt,u=e.firstCreatePass?Cw(d,e,t,r,i,s,o,a,c):e.data[d];Ir(u,!1);let h=Tw(e,t,u,n);lc()&&Ic(e,t,h,u),Bt(h,t);let f=Zh(h,t,h,u);return t[d]=f,bs(t,f),lw(f,u,t),$f(u)&&zh(e,t,u),c!=null&&Gh(t,u,l),u}function Ac(t,e,n,r,i,s,o,a){let c=ne(),l=Wt(),d=rs(l.consts,s);return bw(c,l,t,e,n,r,i,d,o,a),Ac}var Tw=Sw;function Sw(t,e,n,r){return uc(!0),e[ye].createComment("")}function Mc(t,e,n){let r=ne(),i=$_();if(ww(r,i,e)){let s=Wt(),o=Y_();lI(s,o,r,t,e,r[ye],n,!1)}return Mc}function yf(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Cc(t,n,s[o],o,r)}function Nw(t,e,n,r,i,s){let o=e.consts,a=rs(o,i),c=Cs(e,t,2,r,a);return Yh(e,n,c,rs(o,s)),c.attrs!==null&&$a(c,c.attrs,!1),c.mergedAttrs!==null&&$a(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ts(t,e,n,r){let i=ne(),s=Wt(),o=yt+t,a=i[ye],c=s.firstCreatePass?Nw(o,s,i,e,n,r):s.data[o],l=Aw(s,i,c,a,e,t);i[o]=l;let d=$f(c);return Ir(c,!0),Vh(a,l,c),!Dw(c)&&lc()&&Ic(s,i,l,c),P_()===0&&Bt(l,i),O_(),d&&(zh(s,i,c),Wh(s,c,i)),r!==null&&Gh(i,c),Ts}function Ss(){let t=tt();th()?U_():(t=t.parent,Ir(t,!1));let e=t;F_(e)&&j_(),k_();let n=Wt();return n.firstCreatePass&&(dc(n,t),Bf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&X_(e)&&yf(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&eE(e)&&yf(n,e,ne(),e.stylesWithoutHost,!1),Ss}function Rc(t,e,n,r){return Ts(t,e,n,r),Ss(),Rc}var Aw=(t,e,n,r,i,s)=>(uc(!0),Rh(r,i,K_()));var hs="en-US";var Mw=hs;function Rw(t){typeof t=="string"&&(Mw=t.toLowerCase().replace(/_/g,"-"))}function fp(t,e,n){yw(t,e,n)}function hp(t){let e=ne(),n=Wt(),r=rh();oc(r+1);let i=Nc(n,r);if(t.dirty&&M_(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=Ew(e,r);t.reset(s,wE),t.notifyOnChanges()}return!0}return!1}function pp(){return gw(ne(),rh())}function gp(t,e=""){let n=ne(),r=Wt(),i=t+yt,s=r.firstCreatePass?Cs(r,i,1,e,null):r.data[i],o=xw(r,n,s,e,t);n[i]=o,lc()&&Ic(r,n,o,s),Ir(s,!1)}var xw=(t,e,n,r,i)=>(uc(!0),kE(e[ye],r));var Pw=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kf(!1,r.type),s=i.length>0?Iw([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=L({token:e,providedIn:"environment",factory:()=>new e(D(Fe))});let t=e;return t})();function mp(t){Sc("NgStandalone"),t.getStandaloneInjector=e=>e.get(Pw).getOrCreateStandaloneInjector(t)}var $t=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},yp=new $t("18.2.0");var vp=new b("");function xc(t){return!!t&&typeof t.then=="function"}function _p(t){return!!t&&typeof t.subscribe=="function"}var Ow=new b(""),Ep=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=x(Ow,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(xc(o))r.push(o);else if(_p(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ip=new b("");function kw(){gd(()=>{throw new P(600,!1)})}function Lw(t){return t.isBoundToModule}var Fw=10;function jw(t,e,n){try{let r=n();return xc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Pn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(EE),this.afterRenderEffectManager=x(cp),this.zonelessEnabled=x(op),this.externalTestViews=new Set,this.beforeRender=new lt,this.afterTick=new lt,this.componentTypes=[],this.components=[],this.isStable=x(An).hasPendingTasks.pipe(xe(r=>!r)),this._injector=x(Fe)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof us;if(!this._injector.get(Ep).done){let f=!s&&u_(r),p=!1;throw new P(405,p)}let a;s?a=r:a=this._injector.get(yr).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Lw(a)?void 0:this._injector.get(Nn),l=i||a.selector,d=a.create(Ze.NULL,[],l,c),u=d.location.nativeElement,h=d.injector.get(vp,null);return h?.registerApplication(u),d.onDestroy(()=>{this.detachView(d.hostView),Ki(this.components,d),h?.unregisterApplication(u)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new P(101,!1);let i=V(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,V(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Sn,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<Fw;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)Vw(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>hr(c))&&(o.execute(),!this.allViews.some(({_lView:c})=>hr(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ki(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ip,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ki(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new P(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ki(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Vw(t,e,n,r){if(!n&&!hr(t))return;tp(t,e,n&&!r?0:1)}var Uw=(()=>{let e=class e{constructor(){this.zone=x(W),this.changeDetectionScheduler=x(mr),this.applicationRef=x(Pn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bw({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new W($w()),[{provide:W,useFactory:t},{provide:ur,multi:!0,useFactory:()=>{let n=x(Uw,{optional:!0});return()=>n.initialize()}},{provide:ur,multi:!0,useFactory:()=>{let n=x(Hw);return()=>{n.initialize()}}},e===!0?{provide:ap,useValue:!0}:[]]}function $w(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Hw=(()=>{let e=class e{constructor(){this.subscription=new J,this.initialized=!1,this.zone=x(W),this.pendingTasks=x(An)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{W.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{W.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ww=(()=>{let e=class e{constructor(){this.appRef=x(Pn),this.taskService=x(An),this.ngZone=x(W),this.zonelessEnabled=x(op),this.disableScheduling=x(ap,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new J,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(as):null,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xa||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?rf:wh;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(as+this.angularZoneId))}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zw(){return typeof $localize<"u"&&$localize.locale||hs}var Pc=new b("",{providedIn:"root",factory:()=>x(Pc,R.Optional|R.SkipSelf)||zw()});var wp=new b("");function Wi(t){return!!t.platformInjector}function Gw(t){let e=Wi(t)?t.r3Injector:t.moduleRef.injector,n=e.get(W);return n.run(()=>{Wi(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(_t,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Wi(t)){let s=()=>e.destroy(),o=t.platformInjector.get(wp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Ki(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return jw(r,n,()=>{let s=e.get(Ep);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Pc,hs);if(Rw(o||hs),Wi(t)){let a=e.get(Pn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return qw(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function qw(t,e){let n=t.injector.get(Pn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new P(-403,!1);e.push(t)}var Qi=null;function Yw(t=[],e){return Ze.create({name:e,providers:[{provide:_s,useValue:"platform"},{provide:wp,useValue:new Set([()=>Qi=null])},...t]})}function Kw(t=[]){if(Qi)return Qi;let e=Yw(t);return Qi=e,kw(),Qw(e),e}function Qw(t){t.get(mc,null)?.forEach(n=>n())}function Dp(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Kw(r),s=[Bw({}),{provide:mr,useExisting:Ww},...n||[]],o=new fs({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Gw({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var Cp=new b("");var Tp=null;function Lc(){return Tp}function Sp(t){Tp??=t}var Ns=class{};var Te=new b("");function As(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Np=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new kc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){bp("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){bp("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(xn(wr),xn(Tn))},e.\u0275dir=Mf({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),kc=class{constructor(){this.$implicit=null,this.ngIf=null}};function bp(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ge(e)}'.`)}var Fc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vs({type:e}),e.\u0275inj=ms({});let t=e;return t})(),Ap="browser",tD="server";function Ms(t){return t===tD}var kn=class{};var Cr=class{},xs=class{},nt=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Vc=class{encodeKey(e){return Rp(e)}encodeValue(e){return Rp(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nD(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var rD=/%(\d[a-f0-9])/gi,iD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rp(t){return encodeURIComponent(t).replace(rD,(e,n)=>iD[n]??e)}function Rs(t){return`${t}`}var It=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vc,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nD(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Rs):[Rs(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Rs(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Rs(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Uc=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sD(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function xp(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Pp(t){return typeof Blob<"u"&&t instanceof Blob}function Op(t){return typeof FormData<"u"&&t instanceof FormData}function oD(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Dr=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(sD(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new nt,this.context??=new Uc,!this.params)this.params=new It,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||xp(this.body)||Pp(this.body)||Op(this.body)||oD(this.body)?this.body:this.body instanceof It?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Op(this.body)?null:Pp(this.body)?this.body.type||null:xp(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof It?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),d)),new t(n,r,o,{params:d,headers:l,context:u,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},wt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(wt||{}),br=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new nt,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ps=class t extends br{constructor(e={}){super(e),this.type=wt.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tr=class t extends br{constructor(e={}){super(e),this.type=wt.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Et=class extends br{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},jp=200,aD=204;function jc(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var cD=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Dr)o=r;else{let l;s.headers instanceof nt?l=s.headers:l=new nt(s.headers);let d;s.params&&(s.params instanceof It?d=s.params:d=new It({fromObject:s.params})),o=new Dr(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Ui(o).pipe(ra(l=>this.handler.handle(l)));if(r instanceof Dr||s.observe==="events")return a;let c=a.pipe(na(l=>l instanceof Tr));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(xe(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(xe(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(xe(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(xe(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new It().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,jc(s,i))}post(r,i,s={}){return this.request("POST",r,jc(s,i))}put(r,i,s={}){return this.request("PUT",r,jc(s,i))}};e.\u0275fac=function(i){return new(i||e)(D(Cr))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),lD=/^\)\]\}',?\n/,uD="X-Request-URL";function kp(t){if(t.url)return t.url;let e=uD.toLocaleLowerCase();return t.headers.get(e)}var dD=(()=>{let e=class e{constructor(){this.fetchImpl=x(Bc,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=x(W)}handle(r){return new H(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then($c,o=>i.error(new Et({error:o}))),()=>s.abort()})}doRequest(r,i,s){return v(this,null,function*(){let o=this.createRequestInit(r),a;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,le({signal:i},o)));fD(p),s.next({type:wt.Sent}),a=yield p}catch(p){s.error(new Et({error:p,status:p.status??0,statusText:p.statusText,url:r.urlWithParams,headers:p.headers}));return}let c=new nt(a.headers),l=a.statusText,d=kp(a)??r.urlWithParams,u=a.status,h=null;if(r.reportProgress&&s.next(new Ps({headers:c,status:u,statusText:l,url:d})),a.body){let p=a.headers.get("content-length"),g=[],m=a.body.getReader(),_=0,E,O,T=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>v(this,null,function*(){for(;;){let{done:G,value:Z}=yield m.read();if(G)break;if(g.push(Z),_+=Z.length,r.reportProgress){O=r.responseType==="text"?(O??"")+(E??=new TextDecoder).decode(Z,{stream:!0}):void 0;let Ee=()=>s.next({type:wt.DownloadProgress,total:p?+p:void 0,loaded:_,partialText:O});T?T.run(Ee):Ee()}}}));let X=this.concatChunks(g,_);try{let G=a.headers.get("Content-Type")??"";h=this.parseBody(r,X,G)}catch(G){s.error(new Et({error:G,headers:new nt(a.headers),status:a.status,statusText:a.statusText,url:kp(a)??r.urlWithParams}));return}}u===0&&(u=h?jp:0),u>=200&&u<300?(s.next(new Tr({body:h,headers:c,status:u,statusText:l,url:d})),s.complete()):s.error(new Et({error:h,headers:c,status:u,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(lD,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Bc=class{};function $c(){}function fD(t){t.then($c,$c)}function hD(t,e){return e(t)}function pD(t,e,n){return(r,i)=>jf(n,()=>e(r,s=>t(s,i)))}var Vp=new b(""),gD=new b(""),mD=new b("",{providedIn:"root",factory:()=>!0});var Lp=(()=>{let e=class e extends Cr{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=x(An),this.contributeToStability=x(mD)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Vp),...this.injector.get(gD,[])]));this.chain=i.reduceRight((s,o)=>pD(s,o,this.injector),hD)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(ia(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(D(xs),D(Fe))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})();var yD=/^\)\]\}',?\n/;function vD(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Fp=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new P(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ir(i.\u0275loadImpl()):Ui(null)).pipe(sa(()=>new H(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,_)=>a.setRequestHeader(m,_.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let m=a.statusText||"OK",_=new nt(a.getAllResponseHeaders()),E=vD(a)||r.url;return l=new Ps({headers:_,status:a.status,statusText:m,url:E}),l},u=()=>{let{headers:m,status:_,statusText:E,url:O}=d(),T=null;_!==aD&&(T=typeof a.response>"u"?a.responseText:a.response),_===0&&(_=T?jp:0);let X=_>=200&&_<300;if(r.responseType==="json"&&typeof T=="string"){let G=T;T=T.replace(yD,"");try{T=T!==""?JSON.parse(T):null}catch(Z){T=G,X&&(X=!1,T={error:Z,text:T})}}X?(o.next(new Tr({body:T,headers:m,status:_,statusText:E,url:O||void 0})),o.complete()):o.error(new Et({error:T,headers:m,status:_,statusText:E,url:O||void 0}))},h=m=>{let{url:_}=d(),E=new Et({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_||void 0});o.error(E)},f=!1,p=m=>{f||(o.next(d()),f=!0);let _={type:wt.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(_.total=m.total),r.responseType==="text"&&a.responseText&&(_.partialText=a.responseText),o.next(_)},g=m=>{let _={type:wt.UploadProgress,loaded:m.loaded};m.lengthComputable&&(_.total=m.total),o.next(_)};return a.addEventListener("load",u),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(c),o.next({type:wt.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",u),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(kn))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Up=new b(""),_D="XSRF-TOKEN",ED=new b("",{providedIn:"root",factory:()=>_D}),ID="X-XSRF-TOKEN",wD=new b("",{providedIn:"root",factory:()=>ID}),Os=class{},DD=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=As(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(Te),D(Ve),D(ED))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})();function CD(t,e){let n=t.url.toLowerCase();if(!x(Up)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=x(Os).getToken(),i=x(wD);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function Bp(...t){let e=[cD,Fp,Lp,{provide:Cr,useExisting:Lp},{provide:xs,useFactory:()=>x(dD,{optional:!0})??x(Fp)},{provide:Vp,useValue:CD,multi:!0},{provide:Up,useValue:!0},{provide:Os,useClass:DD}];for(let n of t)e.push(...n.\u0275providers);return Ht(e)}var zc=class extends Ns{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gc=class t extends zc{static makeCurrent(){Sp(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TD();return n==null?null:SD(n)}resetBaseElement(){Sr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return As(document.cookie,e)}},Sr=null;function TD(){return Sr=Sr||document.querySelector("base"),Sr?Sr.getAttribute("href"):null}function SD(t){return new URL(t,document.baseURI).pathname}var ND=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),ks=new b(""),zp=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new P(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(ks),D(W))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Nr=class{constructor(e){this._doc=e}},Hc="ng-app-id",Gp=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ms(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Hc}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Hc),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Hc,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(Te),D(gc),D(yc,8),D(Ve))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yc=/%COMP%/g,qp="%COMP%",AD=`_nghost-${qp}`,MD=`_ngcontent-${qp}`,RD=!0,xD=new b("",{providedIn:"root",factory:()=>RD});function PD(t){return MD.replace(Yc,t)}function OD(t){return AD.replace(Yc,t)}function Yp(t,e){return e.map(n=>n.replace(Yc,t))}var $p=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ms(c),this.defaultRenderer=new Ar(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Le.ShadowDom&&(i=Re(le({},i),{encapsulation:Le.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ls?s.applyToHost(r):s instanceof Mr&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Le.Emulated:o=new Ls(l,d,i,this.appId,u,a,c,h);break;case Le.ShadowDom:return new qc(l,d,r,i,a,c,this.nonce,h);default:o=new Mr(l,d,i,u,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(zp),D(Gp),D(gc),D(xD),D(Te),D(Ve),D(W),D(yc))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Ar=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wc[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Hp(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Hp(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new P(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Wc[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Wc[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zt.DashCase|zt.Important)?e.style.setProperty(n,r,i&zt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Lc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Hp(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var qc=class extends Ar{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Yp(i.id,i.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Mr=class extends Ar{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Yp(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ls=class extends Mr{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=PD(l),this.hostAttr=OD(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},kD=(()=>{let e=class e extends Nr{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(D(Te))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),LD=(()=>{let e=class e extends Nr{constructor(r){super(r),this.delegate=x(Cp,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(D(Te))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})(),Wp=["alt","control","meta","shift"],FD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jD={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},VD=(()=>{let e=class e extends Nr{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lc().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Wp.forEach(d=>{let u=i.indexOf(d);u>-1&&(i.splice(u,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=FD[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Wp.forEach(a=>{if(a!==s){let c=jD[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(Te))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let t=e;return t})();function Kp(t,e){return Dp(le({rootComponent:t},UD(e)))}function UD(t){return{appProviders:[...zD,...t?.providers??[]],platformProviders:WD}}function BD(){Gc.makeCurrent()}function $D(){return new _t}function HD(){return Ah(document),document}var WD=[{provide:Ve,useValue:Ap},{provide:mc,useValue:BD,multi:!0},{provide:Te,useFactory:HD,deps:[]}];var zD=[{provide:_s,useValue:"root"},{provide:_t,useFactory:$D,deps:[]},{provide:ks,useClass:kD,multi:!0,deps:[Te,W,Ve]},{provide:ks,useClass:VD,multi:!0,deps:[Te]},{provide:ks,useClass:LD,multi:!0},$p,Gp,zp,{provide:Sn,useExisting:$p},{provide:kn,useClass:ND,deps:[]},[]];var Qc={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(t,e){if(!t)throw qt(e)},qt=function(t){return new Error("Firebase Database ("+Qc.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var Zp=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GD=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},js={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,d=s>>2,u=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[d],n[u],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let u=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||u==null)throw new Zc;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),u!==64){let p=l<<6&192|u;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Zc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Xc=function(t){let e=Zp(t);return js.encodeByteArray(e,!0)},Rr=function(t){return Xc(t).replace(/\./g,"")},xr=function(t){try{return js.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jp(t){return Xp(void 0,t)}function Xp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!qD(n)||(t[n]=Xp(t[n],e[n]));return t}function qD(t){return t!=="__proto__"}function YD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KD=()=>YD().__FIREBASE_DEFAULTS__,QD=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&xr(t[1]);return e&&JSON.parse(e)},el=()=>{try{return KD()||QD()||ZD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eg=t=>{var e,n;return(n=(e=el())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tg=t=>{let e=eg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tl=()=>{var t;return(t=el())===null||t===void 0?void 0:t.config},ng=t=>{var e;return(e=el())===null||e===void 0?void 0:e[`_${t}`]};var Gt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Rr(JSON.stringify(n)),Rr(JSON.stringify(o)),""].join(".")}function Se(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function ig(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vs(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Be(){return Qc.NODE_CLIENT===!0||Qc.NODE_ADMIN===!0}function sg(){try{return typeof indexedDB=="object"}catch{return!1}}function og(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var JD="FirebaseError",Ue=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JD,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ue(i,a,r)}};function XD(t,e){return t.replace(eC,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eC=/\{\$([^}]+)}/g;function Ln(t){return JSON.parse(t)}function Y(t){return JSON.stringify(t)}var ag=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Ln(xr(s[0])||""),n=Ln(xr(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var cg=function(t){let e=ag(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lg=function(t){let e=ag(t).claims;return typeof e=="object"&&e.admin===!0};function $e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yt(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Us(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Or(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function kr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Qp(s)&&Qp(o)){if(!kr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Qp(t){return t!==null&&typeof t=="object"}function Lr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Fs=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let u=0;u<16;u++)r[u]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let u=0;u<16;u++)r[u]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let u=16;u<80;u++){let h=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,d;for(let u=0;u<80;u++){u<40?u<20?(l=a^s&(o^a),d=1518500249):(l=s^o^a,d=1859775393):u<60?(l=s&o|a&(s|o),d=2400959708):(l=s^o^a,d=3395469782);let h=(i<<5|i>>>27)+l+c+d+r[u]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function ug(t,e){let n=new Jc(t,e);return n.subscribe.bind(n)}var Jc=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Kc),i.error===void 0&&(i.error=Kc),i.complete===void 0&&(i.complete=Kc);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tC(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kc(){}function nl(t,e){return`${t} failed: ${e} argument `}var dg=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,y(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Fr=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var rO=4*60*60*1e3;function He(t){return t&&t._delegate?t._delegate:t}var ve=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Kt="[DEFAULT]";var Bs=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Gt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rC(e))try{this.getOrInitializeService({instanceIdentifier:Kt})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Kt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Kt){return this.instances.has(e)}getOptions(e=Kt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kt){return this.component?this.component.multipleInstances?e:Kt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nC(t){return t===Kt?void 0:t}function rC(t){return t.instantiationMode==="EAGER"}var jr=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Bs(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var iC=[],U=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(U||{}),sC={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},oC=U.INFO,aC={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},cC=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=aC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Dt=class{constructor(e){this.name=e,this._logLevel=oC,this._logHandler=cC,this._userLogHandler=null,iC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...e),this._logHandler(this,U.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...e),this._logHandler(this,U.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,U.INFO,...e),this._logHandler(this,U.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,U.WARN,...e),this._logHandler(this,U.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...e),this._logHandler(this,U.ERROR,...e)}};var lC=(t,e)=>e.some(n=>t instanceof n),fg,hg;function uC(){return fg||(fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dC(){return hg||(hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pg=new WeakMap,il=new WeakMap,gg=new WeakMap,rl=new WeakMap,ol=new WeakMap;function fC(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(We(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pg.set(n,t)}).catch(()=>{}),ol.set(e,t),e}function hC(t){if(il.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});il.set(t,e)}var sl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return il.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return We(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mg(t){sl=t(sl)}function pC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call($s(this),e,...n);return gg.set(r,e.sort?e.sort():[e]),We(r)}:dC().includes(t)?function(...e){return t.apply($s(this),e),We(pg.get(this))}:function(...e){return We(t.apply($s(this),e))}}function gC(t){return typeof t=="function"?pC(t):(t instanceof IDBTransaction&&hC(t),lC(t,uC())?new Proxy(t,sl):t)}function We(t){if(t instanceof IDBRequest)return fC(t);if(rl.has(t))return rl.get(t);let e=gC(t);return e!==t&&(rl.set(t,e),ol.set(e,t)),e}var $s=t=>ol.get(t);function vg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=We(o);return r&&o.addEventListener("upgradeneeded",c=>{r(We(o.result),c.oldVersion,c.newVersion,We(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var mC=["get","getKey","getAll","getAllKeys","count"],yC=["put","add","delete","clear"],al=new Map;function yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(al.get(e))return al.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=yC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mC.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return al.set(e,s),s}mg(t=>Re(le({},t),{get:(e,n,r)=>yg(e,n)||t.get(e,n,r),has:(e,n)=>!!yg(e,n)||t.has(e,n)}));var ll=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vC(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function vC(t){let e=t.getComponent();return e?.type==="VERSION"}var ul="@firebase/app",_g="0.10.9";var it=new Dt("@firebase/app"),_C="@firebase/app-compat",EC="@firebase/analytics-compat",IC="@firebase/analytics",wC="@firebase/app-check-compat",DC="@firebase/app-check",CC="@firebase/auth",bC="@firebase/auth-compat",TC="@firebase/database",SC="@firebase/database-compat",NC="@firebase/functions",AC="@firebase/functions-compat",MC="@firebase/installations",RC="@firebase/installations-compat",xC="@firebase/messaging",PC="@firebase/messaging-compat",OC="@firebase/performance",kC="@firebase/performance-compat",LC="@firebase/remote-config",FC="@firebase/remote-config-compat",jC="@firebase/storage",VC="@firebase/storage-compat",UC="@firebase/firestore",BC="@firebase/vertexai-preview",$C="@firebase/firestore-compat",HC="firebase",WC="10.13.0";var dl="[DEFAULT]",zC={[ul]:"fire-core",[_C]:"fire-core-compat",[IC]:"fire-analytics",[EC]:"fire-analytics-compat",[DC]:"fire-app-check",[wC]:"fire-app-check-compat",[CC]:"fire-auth",[bC]:"fire-auth-compat",[TC]:"fire-rtdb",[SC]:"fire-rtdb-compat",[NC]:"fire-fn",[AC]:"fire-fn-compat",[MC]:"fire-iid",[RC]:"fire-iid-compat",[xC]:"fire-fcm",[PC]:"fire-fcm-compat",[OC]:"fire-perf",[kC]:"fire-perf-compat",[LC]:"fire-rc",[FC]:"fire-rc-compat",[jC]:"fire-gcs",[VC]:"fire-gcs-compat",[UC]:"fire-fst",[$C]:"fire-fst-compat",[BC]:"fire-vertex","fire-js":"fire-js",[HC]:"fire-js-all"};var Vr=new Map,GC=new Map,fl=new Map;function Eg(t,e){try{t.container.addComponent(e)}catch(n){it.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bt(t){let e=t.name;if(fl.has(e))return it.debug(`There were multiple attempts to register component ${e}.`),!1;fl.set(e,t);for(let n of Vr.values())Eg(n,t);for(let n of GC.values())Eg(n,t);return!0}function ml(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t.settings!==void 0}var qC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ct=new rt("app","Firebase",qC);var hl=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ve("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}};var jn=WC;function yl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:dl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ct.create("bad-app-name",{appName:String(i)});if(n||(n=tl()),!n)throw Ct.create("no-options");let s=Vr.get(i);if(s){if(kr(n,s.options)&&kr(r,s.config))return s;throw Ct.create("duplicate-app",{appName:i})}let o=new jr(i);for(let c of fl.values())o.addComponent(c);let a=new hl(n,r,o);return Vr.set(i,a),a}function Br(t=dl){let e=Vr.get(t);if(!e&&t===dl&&tl())return yl();if(!e)throw Ct.create("no-app",{appName:t});return e}function Hs(){return Array.from(Vr.values())}function Q(t,e,n){var r;let i=(r=zC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),it.warn(a.join(" "));return}bt(new ve(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var YC="firebase-heartbeat-database",KC=1,Ur="firebase-heartbeat-store",cl=null;function Cg(){return cl||(cl=vg(YC,KC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ur)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ct.create("idb-open",{originalErrorMessage:t.message})})),cl}function QC(t){return v(this,null,function*(){try{let n=(yield Cg()).transaction(Ur),r=yield n.objectStore(Ur).get(bg(t));return yield n.done,r}catch(e){if(e instanceof Ue)it.warn(e.message);else{let n=Ct.create("idb-get",{originalErrorMessage:e?.message});it.warn(n.message)}}})}function Ig(t,e){return v(this,null,function*(){try{let r=(yield Cg()).transaction(Ur,"readwrite");yield r.objectStore(Ur).put(e,bg(t)),yield r.done}catch(n){if(n instanceof Ue)it.warn(n.message);else{let r=Ct.create("idb-set",{originalErrorMessage:n?.message});it.warn(r.message)}}})}function bg(t){return`${t.name}!${t.options.appId}`}var ZC=1024,JC=30*24*60*60*1e3,pl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new gl(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n,r;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wg();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=JC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){it.warn(i)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=wg(),{heartbeatsToSend:r,unsentEntries:i}=XC(this._heartbeatsCache.heartbeats),s=Rr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return it.warn(n),""}})}};function wg(){return new Date().toISOString().substring(0,10)}function XC(t,e=ZC){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Dg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var gl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return sg()?og().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield QC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Dg(t){return Rr(JSON.stringify({version:2,heartbeats:t})).length}function eb(t){bt(new ve("platform-logger",e=>new ll(e),"PRIVATE")),bt(new ve("heartbeat",e=>new pl(e),"PRIVATE")),Q(ul,_g,t),Q(ul,_g,"esm2017"),Q("fire-js","")}eb("");var tb="firebase",nb="10.13.0";Q(tb,nb,"app");var Un=new $t("ANGULARFIRE2_VERSION");function _l(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Hr=(t,e)=>{let n=e?[e]:Hs(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},$r=class{constructor(){return Hr(rb)}},rb="app-check";function Vn(){}var Ws=class{zone;delegate;constructor(e,n=ea){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},vl=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vn,{},Vn,Vn)),n.pipe($i({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Wr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ws(Zone.current)),this.insideAngular=n.run(()=>new Ws(Zone.current,Xo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(W))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zs(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ib(t){return zs().ngZone.runOutsideAngular(()=>t())}function Qt(t){return zs().ngZone.run(()=>t())}function sb(t){return ob(zs())(t)}function ob(t){return function(n){return n=n.lift(new vl(t.ngZone)),n.pipe(dt(t.outsideAngular),ut(t.insideAngular))}}var ab=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Qt(()=>t.apply(void 0,r))},Zt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Qt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vn,{},Vn,Vn))),r[s]=ab(r[s],n));let i=ib(()=>t.apply(this,r));if(!e)if(i instanceof H){let s=zs();return i.pipe(dt(s.outsideAngular),ut(s.insideAngular))}else return Qt(()=>i);return i instanceof H?i.pipe(sb):i instanceof Promise?Qt(()=>new Promise((s,o)=>i.then(a=>Qt(()=>s(a)),a=>Qt(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Qt(()=>i)};var Jt=class{constructor(e){return e}},zr=class{constructor(){return Hs()}};function cb(t){return t&&t.length===1?t[0]:new Jt(Br())}var El=new b("angularfire2._apps"),lb={provide:Jt,useFactory:cb,deps:[[new Je,El]]},ub={provide:zr,deps:[[new Je,El]]};function db(t){return(e,n)=>{let r=n.get(Ve);Q("angularfire",Un.full,"core"),Q("angularfire",Un.full,"app"),Q("angular",yp.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Jt(i)}}function Tg(t,...e){return Ht([lb,ub,{provide:El,useFactory:db(t),multi:!0,deps:[W,Ze,Wr,...e]}])}var Sg=Zt(yl,!0);function kg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Lg=kg,Fg=new rt("auth","Firebase",kg());var Ks=new Dt("@firebase/auth");function fb(t,...e){Ks.logLevel<=U.WARN&&Ks.warn(`Auth (${jn}): ${t}`,...e)}function qs(t,...e){Ks.logLevel<=U.ERROR&&Ks.error(`Auth (${jn}): ${t}`,...e)}function Ng(t,...e){throw xl(t,...e)}function Rl(t,...e){return xl(t,...e)}function jg(t,e,n){let r=Object.assign(Object.assign({},Lg()),{[e]:n});return new rt("auth","Firebase",r).create(e,{appName:t.name})}function Ys(t){return jg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xl(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Fg.create(t,...e)}function F(t,e,...n){if(!t)throw xl(e,...n)}function Gr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw qs(e),new Error(e)}function Qs(t,e){t||Gr(e)}function hb(){return Ag()==="http:"||Ag()==="https:"}function Ag(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function pb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hb()||ig()||"connection"in navigator)?navigator.onLine:!0}function gb(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var en=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qs(n>e,"Short delay should be less than long delay!"),this.isMobile=Pr()||Vs()}get(){return pb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function mb(t,e){Qs(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Zs=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vb=new en(3e4,6e4);function Vg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function to(s,o,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return Ug(t,i,()=>v(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let u=Lr(Object.assign({key:t.config.apiKey},d)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Zs.fetch()(Bg(t,t.config.apiHost,n,u),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function Ug(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},yb),e);try{let i=new Dl(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Gs(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gs(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Gs(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Gs(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jg(t,d,l);Ng(t,d)}}catch(i){if(i instanceof Ue)throw i;Ng(t,"network-request-failed",{message:String(i)})}})}function Bg(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?mb(t.config,i):`${t.config.apiScheme}://${i}`}var Dl=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rl(this.auth,"network-request-failed")),vb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Gs(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Rl(t,e,r);return i.customData._tokenResponse=n,i}function _b(t,e){return v(this,null,function*(){return to(t,"POST","/v1/accounts:delete",e)})}function $g(t,e){return v(this,null,function*(){return to(t,"POST","/v1/accounts:lookup",e)})}function qr(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Pl(t,e=!1){return v(this,null,function*(){let n=He(t),r=yield n.getIdToken(e),i=Hg(r);F(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qr(Il(i.auth_time)),issuedAtTime:qr(Il(i.iat)),expirationTime:qr(Il(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Il(t){return Number(t)*1e3}function Hg(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qs("JWT malformed, contained fewer than 3 sections"),null;try{let i=xr(n);return i?JSON.parse(i):(qs("Failed to decode base64 JWT payload"),null)}catch(i){return qs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mg(t){let e=Hg(t);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cl(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ue&&Eb(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Eb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var bl=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Kr=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Js(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Cl(t,$g(n,{idToken:r}));F(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Wg(s.providerUserInfo):[],a=Ib(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kr(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,u)})}function Ol(t){return v(this,null,function*(){let e=He(t);yield Js(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ib(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Wg(t){return t.map(e=>{var{providerId:n}=e,r=ta(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wb(t,e){return v(this,null,function*(){let n=yield Ug(t,{},()=>v(this,null,function*(){let r=Lr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Bg(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zs.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Db(t,e){return v(this,null,function*(){return to(t,"POST","/v2/accounts:revokeToken",Vg(t,e))})}var Yr=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){F(e.length!==0,"internal-error");let n=Mg(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(F(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield wb(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(F(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(F(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(F(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Gr("not implemented")}};function Tt(t,e){F(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Qr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ta(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kr(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Cl(this,this.stsTokenManager.getToken(this.auth,e));return F(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Pl(this,e)}reload(){return Ol(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Js(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Fn(this.auth.app))return Promise.reject(Ys(this.auth));let e=yield this.getIdToken();return yield Cl(this,_b(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let u=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(l=n.createdAt)!==null&&l!==void 0?l:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:O,emailVerified:T,isAnonymous:X,providerData:G,stsTokenManager:Z}=n;F(O&&Z,e,"internal-error");let Ee=Yr.fromJSON(this.name,Z);F(typeof O=="string",e,"internal-error"),Tt(u,e.name),Tt(h,e.name),F(typeof T=="boolean",e,"internal-error"),F(typeof X=="boolean",e,"internal-error"),Tt(f,e.name),Tt(p,e.name),Tt(g,e.name),Tt(m,e.name),Tt(_,e.name),Tt(E,e.name);let Ge=new t({uid:O,auth:e,email:h,emailVerified:T,displayName:u,isAnonymous:X,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:Ee,createdAt:_,lastLoginAt:E});return G&&Array.isArray(G)&&(Ge.providerData=G.map(qe=>Object.assign({},qe))),m&&(Ge._redirectEventId=m),Ge}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Yr;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Js(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];F(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Wg(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Yr;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Rg=new Map;function Xt(t){Qs(t instanceof Function,"Expected a class definition");let e=Rg.get(t);return e?(Qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rg.set(t,e),e)}var Cb=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Tl=Cb;function wl(t,e,n){return`firebase:${t}:${e}:${n}`}var Xs=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=wl(this.userKey,i.apiKey,s),this.fullPersistenceKey=wl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Qr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Xt(Tl),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Xt(Tl),o=wl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let u=Qr._fromJSON(e,d);l!==s&&(a=u),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function xg(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if(Rb(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||Sb(e))&&!e.includes("edge/"))return"Chrome";if(Ab(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function bb(t=Se()){return/firefox\//i.test(t)}function Tb(t=Se()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sb(t=Se()){return/crios\//i.test(t)}function Nb(t=Se()){return/iemobile/i.test(t)}function Ab(t=Se()){return/android/i.test(t)}function Mb(t=Se()){return/blackberry/i.test(t)}function Rb(t=Se()){return/webos/i.test(t)}function zg(t,e=[]){let n;switch(t){case"Browser":n=xg(Se());break;case"Worker":n=`${xg(Se())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jn}/${r}`}var Sl=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function xb(n){return v(this,arguments,function*(t,e={}){return to(t,"GET","/v2/passwordPolicy",Vg(t,e))})}var Pb=6,Nl=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Pb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Al=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eo(this),this.idTokenSubscription=new eo(this),this.beforeStateQueue=new Sl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xt(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Xs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield $g(this,{idToken:e}),r=yield Qr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(Fn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return F(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Js(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gb()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Fn(this.app))return Promise.reject(Ys(this));let n=e?He(e):null;return n&&F(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&F(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Fn(this.app)?Promise.reject(Ys(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Fn(this.app)?Promise.reject(Ys(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Xt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield xb(this),n=new Nl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Db(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Xt(e)||this._popupRedirectResolver;F(n,this,"argument-error"),this.redirectPersistenceManager=yield Xs.create(this,[Xt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(F(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&fb(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ob(t){return He(t)}var eo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ug(n=>this.observer=n)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var kb={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lb(t){kb=t}function Fb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function jb(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Xt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var ek=Fb("rcb"),tk=new en(3e4,6e4);var nk=new en(2e3,1e4);var rk=10*60*1e3;var ik=new en(3e4,6e4);var sk=new en(5e3,15e3);var ok=encodeURIComponent("fac");var Pg="@firebase/auth",Og="1.7.7";var Ml=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Vb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ub(t){bt(new ve("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;F(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zg(t)},l=new Al(r,i,s,c);return jb(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bt(new ve("auth-internal",e=>{let n=Ob(e.getProvider("auth").getImmediate());return(r=>new Ml(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Q(Pg,Og,Vb(t)),Q(Pg,Og,"esm2017")}var Bb=5*60,ak=ng("authIdTokenMaxAge")||Bb;function $b(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Lb({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Rl("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$b().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ub("Browser");var BT="auth";var no=class{constructor(){return Hr(BT)}};var Gg="@firebase/database",qg="1.0.7";var Vu="";function $T(t){Vu=t}var $l=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Y(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ln(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Hl=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return $e(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Tm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $l(e)}}catch{}return new Hl},nn=Tm("localStorage"),Wl=Tm("sessionStorage");var Wn=new Dt("@firebase/database"),HT=function(){let t=1;return function(){return t++}}(),Sm=function(t){let e=dg(t),n=new Fs;n.update(e);let r=n.digest();return js.encodeByteArray(r)},hi=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hi.apply(null,r):typeof r=="object"?e+=Y(r):e+=r,e+=" "}return e},rn=null,Yg=!0,WT=function(t,e){y(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Wn.logLevel=U.VERBOSE,rn=Wn.log.bind(Wn),e&&Wl.set("logging_enabled",!0)):typeof t=="function"?rn=t:(rn=null,Wl.remove("logging_enabled"))},re=function(...t){if(Yg===!0&&(Yg=!1,rn===null&&Wl.get("logging_enabled")===!0&&WT(!0)),rn){let e=hi.apply(null,t);rn(e)}},pi=function(t){return function(...e){re(t,...e)}},zl=function(...t){let e="FIREBASE INTERNAL ERROR: "+hi(...t);Wn.error(e)},st=function(...t){let e=`FIREBASE FATAL ERROR: ${hi(...t)}`;throw Wn.error(e),new Error(e)},de=function(...t){let e="FIREBASE WARNING: "+hi(...t);Wn.warn(e)},zT=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&de("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Nm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},GT=function(t){if(Be()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qn="[MIN_NAME]",sn="[MAX_NAME]",er=function(t,e){if(t===e)return 0;if(t===qn||e===sn)return-1;if(e===qn||t===sn)return 1;{let n=Kg(t),r=Kg(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},qT=function(t,e){return t===e?0:t<e?-1:1},Zr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Y(e))},Uu=function(t){if(typeof t!="object"||t===null)return Y(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Y(e[r]),n+=":",n+=Uu(t[e[r]]);return n+="}",n},Am=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ae(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Mm=function(t){y(!Nm(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),u="";for(c=0;c<64;c+=8){let h=parseInt(d.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},YT=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},KT=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function QT(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var ZT=new RegExp("^-?(0*)\\d{1,10}$"),JT=-2147483648,XT=2147483647,Kg=function(t){if(ZT.test(t)){let e=Number(t);if(e>=JT&&e<=XT)return e}return null},gi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw de("Exception was thrown by user callback.",n),e},Math.floor(0))}},eS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ni=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Gl=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){de(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ql=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',de(e)}},ri=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),io="5",Rm="v",xm="s",Pm="r",Om="f",km=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lm="ls",Fm="p",Yl="ac",jm="websocket",Vm="long_polling";var so=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function tS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Um(t,e,n){y(typeof e=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let r;if(e===jm)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Vm)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);tS(t)&&(n.ns=t.namespace);let i=[];return ae(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Kl=class{constructor(){this.counters_={}}incrementCounter(e,n=1){$e(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Jp(this.counters_)}};var kl={},Ll={};function Bu(t){let e=t.toString();return kl[e]||(kl[e]=new Kl),kl[e]}function nS(t,e){let n=t.toString();return Ll[n]||(Ll[n]=e()),Ll[n]}var Ql=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&gi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Qg="start",rS="close",iS="pLPCommand",sS="pRTLPCB",Bm="id",$m="pw",Hm="ser",oS="cb",aS="seg",cS="ts",lS="d",uS="dframe",Wm=1870,zm=30,dS=Wm-zm,fS=25e3,hS=3e4,Zl=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pi(e),this.stats_=Bu(n),this.urlFn=c=>(this.appCheckToken&&(c[Yl]=this.appCheckToken),Um(n,Vm,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ql(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hS)),GT(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jl((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Qg)this.id=a,this.password=c;else if(o===rS)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Qg]="t",r[Hm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[oS]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Rm]=io,this.transportSessionId&&(r[xm]=this.transportSessionId),this.lastSessionId&&(r[Lm]=this.lastSessionId),this.applicationId&&(r[Fm]=this.applicationId),this.appCheckToken&&(r[Yl]=this.appCheckToken),typeof location<"u"&&location.hostname&&km.test(location.hostname)&&(r[Pm]=Om);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Be()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YT()&&!KT()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Y(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Xc(n),i=Am(r,dS);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Be())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[uS]="t",r[Bm]=e,r[$m]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Y(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Jl=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Be())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=HT(),window[iS+this.uniqueCallbackIdentifier]=e,window[sS+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){re("frame writing exception"),a.stack&&re(a.stack),re(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||re("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Bm]=this.myID,e[$m]=this.myPW,e[Hm]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+zm+r.length<=Wm;){let o=this.pendingSegs.shift();r=r+"&"+aS+i+"="+o.seg+"&"+cS+i+"="+o.ts+"&"+lS+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(fS)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Be()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var pS=16384,gS=45e3,oo=null;typeof MozWebSocket<"u"?oo=MozWebSocket:typeof WebSocket<"u"&&(oo=WebSocket);var Jr=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pi(this.connId),this.stats_=Bu(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Rm]=io,!Be()&&typeof location<"u"&&location.hostname&&km.test(location.hostname)&&(a[Pm]=Om),r&&(a[xm]=r),i&&(a[Lm]=i),s&&(a[Yl]=s),o&&(a[Fm]=o),Um(n,jm,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nn.set("previous_websocket_failure",!0);try{let i;if(Be()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${io}/${Vu}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new oo(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&oo!==null&&!t.forceDisallow_}static previouslyFailed(){return nn.isInMemoryStorage||nn.get("previous_websocket_failure")===!0}markConnectionHealthy(){nn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ln(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Y(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Am(r,pS);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(gS))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),mS=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Zl,Jr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Jr&&Jr.isAvailable(),i=r&&!Jr.previouslyFailed();if(n.webSocketOnly&&(r||de("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Jr];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),yS=6e4,vS=5e3,_S=10*1024,ES=100*1024,Fl="t",Zg="d",IS="s",Jg="r",wS="e",Xg="o",em="a",tm="n",nm="p",DS="h",Xl=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pi("c:"+this.id+":"),this.transportManager_=new mS(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ni(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ES?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_S?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fl in e){let n=e[Fl];n===em?this.upgradeIfSecondaryHealthy_():n===Jg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Xg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Zr("t",e),r=Zr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:em,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Zr("t",e),r=Zr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Zr(Fl,e);if(Zg in e){let r=e[Zg];if(n===DS){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===tm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===IS?this.onConnectionShutdown_(r):n===Jg?this.onReset_(r):n===wS?zl("Server Error: "+r):n===Xg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zl("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),io!==r&&de("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ni(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(yS))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ni(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nm,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ao=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var co=class{constructor(e){this.allowedEvents_=e,this.listeners_={},y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var lo=class t extends co{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pr()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var rm=32,im=768,B=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function j(){return new B("")}function N(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Nt(t){return t.pieces_.length-t.pieceNum_}function $(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new B(t.pieces_,e)}function Gm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CS(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qm(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ym(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new B(e,0)}function K(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof B)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new B(n,0)}function A(t){return t.pieceNum_>=t.pieces_.length}function oe(t,e){let n=N(t),r=N(e);if(n===null)return e;if(n===r)return oe($(t),$(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $u(t,e){if(Nt(t)!==Nt(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ae(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Nt(t)>Nt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var eu=class{constructor(e,n){this.errorPrefix_=n,this.parts_=qm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fr(this.parts_[r]);Km(this)}};function bS(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Fr(e),Km(t)}function TS(t){let e=t.parts_.pop();t.byteLength_-=Fr(e),t.parts_.length>0&&(t.byteLength_-=1)}function Km(t){if(t.byteLength_>im)throw new Error(t.errorPrefix_+"has a key path longer than "+im+" bytes ("+t.byteLength_+").");if(t.parts_.length>rm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rm+") or object contains a cycle "+tn(t))}function tn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var tu=class t extends co{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return y(e==="visible","Unknown event type: "+e),[this.visible_]}};var Xr=1e3,SS=60*5*1e3,sm=30*1e3,NS=1.3,AS=3e4,MS="server_kill",om=3,Hu=(()=>{class t extends ao{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=pi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xr,this.maxReconnectDelay_=SS,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Be())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tu.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&lo.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Y(o)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Gt,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&$e(n,"w")){let i=Yt(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();de(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||lg(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sm)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=cg(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Y(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):zl("Unrecognized action received from server: "+Y(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xr,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Xr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>AS&&(this.reconnectDelay_=Xr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*NS)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(h){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?re("getToken() completed but was canceled"):(re("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Xl(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{de(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(MS)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&de(h),l())}}})}interrupt(n){re("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){re("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Us(this.interruptReasons_)&&(this.reconnectDelay_=Xr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Uu(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new B(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){re("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=om&&(this.reconnectDelay_=sm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){re("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=om&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Be()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Vu.replace(/\./g,"-")]=1,Pr()?n["framework.cordova"]=1:Vs()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=lo.getInstance().currentlyOnline();return Us(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),S=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Yn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new S(qn,e),i=new S(qn,n);return this.compare(r,i)!==0}minPost(){return S.MIN}};var ro,uo=class extends Yn{static get __EMPTY_NODE(){return ro}static set __EMPTY_NODE(e){ro=e}compare(e,n){return er(e.name,n.name)}isDefinedOn(e){throw qt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return S.MIN}maxPost(){return new S(sn,ro)}makePost(e,n){return y(typeof e=="string","KeyIndex indexValue must always be a string."),new S(e,ro)}toString(){return".key"}},zn=new uo;var $n=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ne=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??_e.EMPTY_NODE,this.right=o??_e.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _e.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return _e.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),nu=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ne(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_e=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ne.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ne.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $n(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $n(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $n(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $n(this.root_,null,this.comparator_,!0,e)}};_e.EMPTY_NODE=new nu;function RS(t,e){return er(t.name,e.name)}function Wu(t,e){return er(t,e)}var ru;function xS(t){ru=t}var Qm=function(t){return typeof t=="number"?"number:"+Mm(t):"string:"+t},Zm=function(t){if(t.isLeafNode()){let e=t.val();y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$e(e,".sv"),"Priority must be a string or number.")}else y(t===ru||t.isEmpty(),"priority of unexpected type.");y(t===ru||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var am,Kn=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Zm(this.priorityNode_)}static set __childrenNodeConstructor(n){am=n}static get __childrenNodeConstructor(){return am}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return A(n)?this:N(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=N(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Nt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild($(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Qm(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Mm(this.value_):n+=this.value_,this.lazyHash_=Sm(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return y(s>=0,"Unknown leaf type: "+r),y(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Jm,Xm;function PS(t){Jm=t}function OS(t){Xm=t}var iu=class extends Yn{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?er(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return S.MIN}maxPost(){return new S(sn,new Kn("[PRIORITY-POST]",Xm))}makePost(e,n){let r=Jm(e);return new S(n,new Kn("[PRIORITY-POST]",r))}toString(){return".priority"}},q=new iu;var kS=Math.log(2),su=class{constructor(e){let n=s=>parseInt(Math.log(s)/kS,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},fo=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,u,h;if(d===0)return null;if(d===1)return u=t[c],h=n?n(u):u,new Ne(h,u.node,Ne.BLACK,null,null);{let f=parseInt(d/2,10)+c,p=i(c,f),g=i(f+1,l);return u=t[f],h=n?n(u):u,new Ne(h,u.node,Ne.BLACK,p,g)}},s=function(c){let l=null,d=null,u=t.length,h=function(p,g){let m=u-p,_=u;u-=p;let E=i(m+1,_),O=t[m],T=n?n(O):O;f(new Ne(T,O.node,g,null,E))},f=function(p){l?(l.left=p,l=p):(d=p,l=p)};for(let p=0;p<c.count;++p){let g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,Ne.BLACK):(h(m,Ne.BLACK),h(m,Ne.RED))}return d},o=new su(t.length),a=s(o);return new _e(r||e,a)};var jl,Bn={},Qn=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return y(Bn&&q,"ChildrenNode.ts has not been loaded"),jl=jl||new t({".priority":Bn},{".priority":q}),jl}get(e){let n=Yt(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof _e?n:null}hasIndex(e){return $e(this.indexSet_,e.toString())}addIndex(e,n){y(e!==zn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(S.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=fo(r,e.getCompare()):a=Bn;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=Or(this.indexes_,(i,s)=>{let o=Yt(this.indexSet_,s);if(y(o,"Missing index implementation for "+s),i===Bn)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(S.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),fo(a,o.getCompare())}else return Bn;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new S(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Or(this.indexes_,i=>{if(i===Bn)return i;{let s=n.get(e.name);return s?i.remove(new S(e.name,s)):i}});return new t(r,this.indexSet_)}};var ei,w=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Zm(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ei||(ei=new t(new _e(Wu),null,Qn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ei}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ei:r}}getChild(n){let r=N(n);return r===null?this:this.getImmediateChild(r).getChild($(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(y(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new S(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ei:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=N(n);if(i===null)return r;{y(N(n)!==".priority"||Nt(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild($(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(q,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Qm(this.getPriority().val())+":"),this.forEachChild(q,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Sm(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new S(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new S(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new S(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,S.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,S.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===mi?-1:0}withIndex(n){if(n===zn||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===zn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(q),s=r.getIterator(q),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===zn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),ou=class extends w{constructor(){super(new _e(Wu),w.EMPTY_NODE,Qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return w.EMPTY_NODE}isEmpty(){return!1}},mi=new ou;Object.defineProperties(S,{MIN:{value:new S(qn,w.EMPTY_NODE)},MAX:{value:new S(sn,mi)}});uo.__EMPTY_NODE=w.EMPTY_NODE;Kn.__childrenNodeConstructor=w;xS(mi);OS(mi);var LS=!0;function ie(t,e=null){if(t===null)return w.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Kn(n,ie(e))}if(!(t instanceof Array)&&LS){let n=[],r=!1;if(ae(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=ie(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new S(o,c)))}}),n.length===0)return w.EMPTY_NODE;let s=fo(n,RS,o=>o.name,Wu);if(r){let o=fo(n,q.getCompare());return new w(s,ie(e),new Qn({".priority":o},{".priority":q}))}else return new w(s,ie(e),Qn.Default)}else{let n=w.EMPTY_NODE;return ae(t,(r,i)=>{if($e(t,r)&&r.substring(0,1)!=="."){let s=ie(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ie(e))}}PS(ie);var au=class extends Yn{constructor(e){super(),this.indexPath_=e,y(!A(e)&&N(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?er(e.name,n.name):s}makePost(e,n){let r=ie(e),i=w.EMPTY_NODE.updateChild(this.indexPath_,r);return new S(n,i)}maxPost(){let e=w.EMPTY_NODE.updateChild(this.indexPath_,mi);return new S(sn,e)}toString(){return qm(this.indexPath_,0).join("/")}};var cu=class extends Yn{compare(e,n){let r=e.node.compareTo(n.node);return r===0?er(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return S.MIN}maxPost(){return S.MAX}makePost(e,n){let r=ie(e);return new S(n,r)}toString(){return".value"}},FS=new cu;function ey(t){return{type:"value",snapshotNode:t}}function Zn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ai(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ci(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jS(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var li=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ai(n,a)):y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Zn(n,r)):o.trackChildChange(ci(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(q,(i,s)=>{n.hasChild(i)||r.trackChildChange(ai(i,s))}),n.isLeafNode()||n.forEachChild(q,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ci(i,s,o))}else r.trackChildChange(Zn(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?w.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var ho=class t{constructor(e){this.indexedFilter_=new li(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new S(n,r))||(r=w.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=w.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(w.EMPTY_NODE);let s=this;return n.forEachChild(q,(o,a)=>{s.matches(new S(o,a))||(i=i.updateImmediateChild(o,w.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var lu=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ho(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new S(n,r))||(r=w.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=w.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=w.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(w.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,w.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let u=this.index_.getCompare();o=(h,f)=>u(f,h)}else o=this.index_.getCompare();let a=e;y(a.numChildren()===this.limit_,"");let c=new S(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let u=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(d&&!r.isEmpty()&&f>=0)return s?.trackChildChange(ci(n,r,u)),a.updateImmediateChild(n,r);{s?.trackChildChange(ai(n,u));let g=a.updateImmediateChild(n,w.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Zn(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(ai(l.name,l.node)),s.trackChildChange(Zn(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,w.EMPTY_NODE)):e}};var uu=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=q}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qn}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===q}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function VS(t){return t.loadsAllData()?new li(t.getIndex()):t.hasLimit()?new lu(t):new ho(t)}function cm(t){let e={};if(t.isDefault())return e;let n;if(t.index_===q?n="$priority":t.index_===FS?n="$value":t.index_===zn?n="$key":(y(t.index_ instanceof au,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Y(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Y(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Y(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Y(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Y(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lm(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==q&&(e.i=t.index_.toString()),e}var du=class t extends ao{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=pi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=cm(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let u=d;if(l===404&&(u=null,l=null),l===null&&this.onDataUpdate_(s,u,!1,r),Yt(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=cm(e._queryParams),r=e._path.toString(),i=new Gt;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lr(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ln(a.responseText)}catch{de("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&de("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var fu=class{constructor(){this.rootNode_=w.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function po(){return{value:null,children:new Map}}function ty(t,e,n){if(A(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=N(e);t.children.has(r)||t.children.set(r,po());let i=t.children.get(r);e=$(e),ty(i,e,n)}}function hu(t,e,n){t.value!==null?n(e,t.value):US(t,(r,i)=>{let s=new B(e.toString()+"/"+r);hu(i,s,n)})}function US(t,e){t.children.forEach((n,r)=>{e(r,n)})}var pu=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ae(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var um=10*1e3,BS=30*1e3,$S=5*60*1e3,gu=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new pu(e);let r=um+(BS-um)*Math.random();ni(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;ae(e,(i,s)=>{s>0&&$e(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ni(this.reportStats_.bind(this),Math.floor(Math.random()*2*$S))}};var ze=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ze||{});function ny(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Gu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var mu=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ze.ACK_USER_WRITE,this.source=ny()}operationForChild(e){if(A(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new B(e));return new t(j(),n,this.revert)}}else return y(N(this.path)===e,"operationForChild called for unrelated child."),new t($(this.path),this.affectedTree,this.revert)}};var go=class t{constructor(e,n){this.source=e,this.path=n,this.type=ze.LISTEN_COMPLETE}operationForChild(e){return A(this.path)?new t(this.source,j()):new t(this.source,$(this.path))}};var Jn=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ze.OVERWRITE}operationForChild(e){return A(this.path)?new t(this.source,j(),this.snap.getImmediateChild(e)):new t(this.source,$(this.path),this.snap)}};var mo=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ze.MERGE}operationForChild(e){if(A(this.path)){let n=this.children.subtree(new B(e));return n.isEmpty()?null:n.value?new Jn(this.source,j(),n.value):new t(this.source,j(),n)}else return y(N(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,$(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ot=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(A(e))return this.isFullyInitialized()&&!this.filtered_;let n=N(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var yu=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function HS(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(jS(o.childName,o.snapshotNode))}),ti(t,i,"child_removed",e,r,n),ti(t,i,"child_added",e,r,n),ti(t,i,"child_moved",s,r,n),ti(t,i,"child_changed",e,r,n),ti(t,i,"value",e,r,n),i}function ti(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>zS(t,a,c)),o.forEach(a=>{let c=WS(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function WS(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function zS(t,e,n){if(e.childName==null||n.childName==null)throw qt("Should only compare child_ events.");let r=new S(e.childName,e.snapshotNode),i=new S(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function So(t,e){return{eventCache:t,serverCache:e}}function ii(t,e,n,r){return So(new ot(e,n,r),t.serverCache)}function ry(t,e,n,r){return So(t.eventCache,new ot(e,n,r))}function vu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function on(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Vl,GS=()=>(Vl||(Vl=new _e(qT)),Vl),ce=class t{constructor(e,n=GS()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return ae(e,(r,i)=>{n=n.set(new B(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:j(),value:this.value};if(A(e))return null;{let r=N(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue($(e),n);return s!=null?{path:K(new B(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(A(e))return this;{let n=N(e),r=this.children.get(n);return r!==null?r.subtree($(e)):new t(null)}}set(e,n){if(A(e))return new t(n,this.children);{let r=N(e),s=(this.children.get(r)||new t(null)).set($(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(A(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=N(e),r=this.children.get(n);if(r){let i=r.remove($(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(A(e))return this.value;{let n=N(e),r=this.children.get(n);return r?r.get($(e)):null}}setTree(e,n){if(A(e))return n;{let r=N(e),s=(this.children.get(r)||new t(null)).setTree($(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(j(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(K(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,j(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(A(e))return null;{let s=N(e),o=this.children.get(s);return o?o.findOnPath_($(e),K(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,j(),n)}foreachOnPath_(e,n,r){if(A(e))return this;{this.value&&r(n,this.value);let i=N(e),s=this.children.get(i);return s?s.foreachOnPath_($(e),K(n,i),r):new t(null)}}foreach(e){this.foreach_(j(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(K(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Me=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ce(null))}};function si(t,e,n){if(A(e))return new Me(new ce(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=oe(i,e);return s=s.updateChild(o,n),new Me(t.writeTree_.set(i,s))}else{let i=new ce(n),s=t.writeTree_.setTree(e,i);return new Me(s)}}}function dm(t,e,n){let r=t;return ae(n,(i,s)=>{r=si(r,K(e,i),s)}),r}function fm(t,e){if(A(e))return Me.empty();{let n=t.writeTree_.setTree(e,new ce(null));return new Me(n)}}function _u(t,e){return an(t,e)!=null}function an(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(oe(n.path,e)):null}function hm(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(q,(r,i)=>{e.push(new S(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new S(r,i.value))}),e}function St(t,e){if(A(e))return t;{let n=an(t,e);return n!=null?new Me(new ce(n)):new Me(t.writeTree_.subtree(e))}}function Eu(t){return t.writeTree_.isEmpty()}function Xn(t,e){return iy(j(),t.writeTree_,e)}function iy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=iy(K(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(K(t,".priority"),r)),n}}function qu(t,e){return cy(e,t)}function qS(t,e,n,r,i){y(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=si(t.visibleWrites,e,n)),t.lastWriteId=r}function YS(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function KS(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);y(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&QS(a,r.path)?i=!1:Ae(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return ZS(t),!0;if(r.snap)t.visibleWrites=fm(t.visibleWrites,r.path);else{let a=r.children;ae(a,c=>{t.visibleWrites=fm(t.visibleWrites,K(r.path,c))})}return!0}else return!1}function QS(t,e){if(t.snap)return Ae(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Ae(K(t.path,n),e))return!0;return!1}function ZS(t){t.visibleWrites=sy(t.allWrites,JS,j()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function JS(t){return t.visible}function sy(t,e,n){let r=Me.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Ae(n,o)?(a=oe(n,o),r=si(r,a,s.snap)):Ae(o,n)&&(a=oe(o,n),r=si(r,j(),s.snap.getChild(a)));else if(s.children){if(Ae(n,o))a=oe(n,o),r=dm(r,a,s.children);else if(Ae(o,n))if(a=oe(o,n),A(a))r=dm(r,j(),s.children);else{let c=Yt(s.children,N(a));if(c){let l=c.getChild($(a));r=si(r,j(),l)}}}else throw qt("WriteRecord should have .snap or .children")}}return r}function oy(t,e,n,r,i){if(!r&&!i){let s=an(t.visibleWrites,e);if(s!=null)return s;{let o=St(t.visibleWrites,e);if(Eu(o))return n;if(n==null&&!_u(o,j()))return null;{let a=n||w.EMPTY_NODE;return Xn(o,a)}}}else{let s=St(t.visibleWrites,e);if(!i&&Eu(s))return n;if(!i&&n==null&&!_u(s,j()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ae(l.path,e)||Ae(e,l.path))},a=sy(t.allWrites,o,e),c=n||w.EMPTY_NODE;return Xn(a,c)}}}function XS(t,e,n){let r=w.EMPTY_NODE,i=an(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(q,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=St(t.visibleWrites,e);return n.forEachChild(q,(o,a)=>{let c=Xn(St(s,new B(o)),a);r=r.updateImmediateChild(o,c)}),hm(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=St(t.visibleWrites,e);return hm(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function e0(t,e,n,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=K(e,n);if(_u(t.visibleWrites,s))return null;{let o=St(t.visibleWrites,s);return Eu(o)?i.getChild(n):Xn(o,i.getChild(n))}}function t0(t,e,n,r){let i=K(e,n),s=an(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=St(t.visibleWrites,i);return Xn(o,r.getNode().getImmediateChild(n))}else return null}function n0(t,e){return an(t.visibleWrites,e)}function r0(t,e,n,r,i,s,o){let a,c=St(t.visibleWrites,e),l=an(c,j());if(l!=null)a=l;else if(n!=null)a=Xn(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&d.length<i;)u(f,r)!==0&&d.push(f),f=h.getNext();return d}else return[]}function i0(){return{visibleWrites:Me.empty(),allWrites:[],lastWriteId:-1}}function yo(t,e,n,r){return oy(t.writeTree,t.treePath,e,n,r)}function Yu(t,e){return XS(t.writeTree,t.treePath,e)}function pm(t,e,n,r){return e0(t.writeTree,t.treePath,e,n,r)}function vo(t,e){return n0(t.writeTree,K(t.treePath,e))}function s0(t,e,n,r,i,s){return r0(t.writeTree,t.treePath,e,n,r,i,s)}function Ku(t,e,n){return t0(t.writeTree,t.treePath,e,n)}function ay(t,e){return cy(K(t.treePath,e),t.writeTree)}function cy(t,e){return{treePath:t,writeTree:e}}var Iu=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ci(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ai(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Zn(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ci(r,e.snapshotNode,i.oldSnap));else throw qt("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var wu=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},ly=new wu,ui=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new ot(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ku(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:on(this.viewCache_),s=s0(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function o0(t){return{filter:t}}function a0(t,e){y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function c0(t,e,n,r,i){let s=new Iu,o,a;if(n.type===ze.OVERWRITE){let l=n;l.source.fromUser?o=Du(t,e,l.path,l.snap,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!A(l.path),o=_o(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===ze.MERGE){let l=n;l.source.fromUser?o=u0(t,e,l.path,l.children,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Cu(t,e,l.path,l.children,r,i,a,s))}else if(n.type===ze.ACK_USER_WRITE){let l=n;l.revert?o=h0(t,e,l.path,r,i,s):o=d0(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===ze.LISTEN_COMPLETE)o=f0(t,e,n.path,r,s);else throw qt("Unknown operation type: "+n.type);let c=s.getChanges();return l0(e,o,c),{viewCache:o,changes:c}}function l0(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ey(vu(e)))}}function uy(t,e,n,r,i,s){let o=e.eventCache;if(vo(r,n)!=null)return e;{let a,c;if(A(n))if(y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=on(e),d=l instanceof w?l:w.EMPTY_NODE,u=Yu(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let l=yo(r,on(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=N(n);if(l===".priority"){y(Nt(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let u=pm(r,n,d,c);u!=null?a=t.filter.updatePriority(d,u):a=o.getNode()}else{let d=$(n),u;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=pm(r,n,o.getNode(),c);h!=null?u=o.getNode().getImmediateChild(l).updateChild(d,h):u=o.getNode().getImmediateChild(l)}else u=Ku(r,l,e.serverCache);u!=null?a=t.filter.updateChild(o.getNode(),l,u,d,i,s):a=o.getNode()}}return ii(e,a,o.isFullyInitialized()||A(n),t.filter.filtersNodes())}}function _o(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(A(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),f,null)}else{let f=N(n);if(!c.isCompleteForPath(n)&&Nt(n)>1)return e;let p=$(n),m=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=d.updatePriority(c.getNode(),m):l=d.updateChild(c.getNode(),f,m,p,ly,null)}let u=ry(e,l,c.isFullyInitialized()||A(n),d.filtersNodes()),h=new ui(i,u,s);return uy(t,u,n,i,h,a)}function Du(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new ui(i,e,s);if(A(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=ii(e,l,!0,t.filter.filtersNodes());else{let u=N(n);if(u===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=ii(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=$(n),f=a.getNode().getImmediateChild(u),p;if(A(h))p=r;else{let g=d.getCompleteChild(u);g!=null?Gm(h)===".priority"&&g.getChild(Ym(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=w.EMPTY_NODE}if(f.equals(p))c=e;else{let g=t.filter.updateChild(a.getNode(),u,p,h,d,o);c=ii(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function gm(t,e){return t.eventCache.isCompleteForChild(e)}function u0(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=K(n,c);gm(e,N(d))&&(a=Du(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=K(n,c);gm(e,N(d))||(a=Du(t,a,d,l,i,s,o))}),a}function mm(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Cu(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;A(n)?l=r:l=new ce(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let f=e.serverCache.getNode().getImmediateChild(u),p=mm(t,f,h);c=_o(t,c,new B(u),p,i,s,o,a)}}),l.children.inorderTraversal((u,h)=>{let f=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!f){let p=e.serverCache.getNode().getImmediateChild(u),g=mm(t,p,h);c=_o(t,c,new B(u),g,i,s,o,a)}}),c}function d0(t,e,n,r,i,s,o){if(vo(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(A(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return _o(t,e,n,c.getNode().getChild(n),i,s,a,o);if(A(n)){let l=new ce(null);return c.getNode().forEachChild(zn,(d,u)=>{l=l.set(new B(d),u)}),Cu(t,e,n,l,i,s,a,o)}else return e}else{let l=new ce(null);return r.foreach((d,u)=>{let h=K(n,d);c.isCompleteForPath(h)&&(l=l.set(d,c.getNode().getChild(h)))}),Cu(t,e,n,l,i,s,a,o)}}function f0(t,e,n,r,i){let s=e.serverCache,o=ry(e,s.getNode(),s.isFullyInitialized()||A(n),s.isFiltered());return uy(t,o,n,r,ly,i)}function h0(t,e,n,r,i,s){let o;if(vo(r,n)!=null)return e;{let a=new ui(r,e,i),c=e.eventCache.getNode(),l;if(A(n)||N(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=yo(r,on(e));else{let u=e.serverCache.getNode();y(u instanceof w,"serverChildren would be complete if leaf node"),d=Yu(r,u)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=N(n),u=Ku(r,d,e.serverCache);u==null&&e.serverCache.isCompleteForChild(d)&&(u=c.getImmediateChild(d)),u!=null?l=t.filter.updateChild(c,d,u,$(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,w.EMPTY_NODE,$(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yo(r,on(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||vo(r,j())!=null,ii(e,l,o,t.filter.filtersNodes())}}var bu=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new li(r.getIndex()),s=VS(r);this.processor_=o0(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(w.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(w.EMPTY_NODE,a.getNode(),null),d=new ot(c,o.isFullyInitialized(),i.filtersNodes()),u=new ot(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=So(u,d),this.eventGenerator_=new yu(this.query_)}get query(){return this.query_}};function p0(t){return t.viewCache_.serverCache.getNode()}function g0(t,e){let n=on(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!A(e)&&!n.getImmediateChild(N(e)).isEmpty())?n.getChild(e):null}function ym(t){return t.eventRegistrations_.length===0}function m0(t,e){t.eventRegistrations_.push(e)}function vm(t,e,n){let r=[];if(n){y(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _m(t,e,n,r){e.type===ze.MERGE&&e.source.queryId!==null&&(y(on(t.viewCache_),"We should always have a full cache before handling merges"),y(vu(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=c0(t.processor_,i,e,n,r);return a0(t.processor_,s.viewCache),y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,dy(t,s.changes,s.viewCache.eventCache.getNode(),null)}function y0(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(q,(s,o)=>{r.push(Zn(s,o))}),n.isFullyInitialized()&&r.push(ey(n.getNode())),dy(t,r,n.getNode(),e)}function dy(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return HS(t.eventGenerator_,e,n,i)}var Eo,Tu=class{constructor(){this.views=new Map}};function v0(t){y(!Eo,"__referenceConstructor has already been defined"),Eo=t}function _0(){return y(Eo,"Reference.ts has not been loaded"),Eo}function E0(t){return t.views.size===0}function Qu(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return y(s!=null,"SyncTree gave us an op for an invalid query."),_m(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(_m(o,e,n,r));return s}}function I0(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=yo(n,i?r:null),c=!1;a?c=!0:r instanceof w?(a=Yu(n,r),c=!1):(a=w.EMPTY_NODE,c=!1);let l=So(new ot(a,c,!1),new ot(r,i,!1));return new bu(e,l)}return o}function w0(t,e,n,r,i,s){let o=I0(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),m0(o,n),y0(o,n)}function D0(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=At(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(vm(l,n,r)),ym(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(vm(c,n,r)),ym(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!At(t)&&s.push(new(_0())(e._repo,e._path)),{removed:s,events:o}}function fy(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gn(t,e){let n=null;for(let r of t.views.values())n=n||g0(r,e);return n}function hy(t,e){if(e._queryParams.loadsAllData())return No(t);{let r=e._queryIdentifier;return t.views.get(r)}}function py(t,e){return hy(t,e)!=null}function At(t){return No(t)!=null}function No(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Io;function C0(t){y(!Io,"__referenceConstructor has already been defined"),Io=t}function b0(){return y(Io,"Reference.ts has not been loaded"),Io}var T0=1,wo=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_=i0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function S0(t,e,n,r,i){return qS(t.pendingWriteTree_,e,n,r,i),i?yi(t,new Jn(ny(),e,n)):[]}function Hn(t,e,n=!1){let r=YS(t.pendingWriteTree_,e);if(KS(t.pendingWriteTree_,e)){let s=new ce(null);return r.snap!=null?s=s.set(j(),!0):ae(r.children,o=>{s=s.set(new B(o),!0)}),yi(t,new mu(r.path,s,n))}else return[]}function Ao(t,e,n){return yi(t,new Jn(zu(),e,n))}function N0(t,e,n){let r=ce.fromObject(n);return yi(t,new mo(zu(),e,r))}function A0(t,e){return yi(t,new go(zu(),e))}function M0(t,e,n){let r=Zu(t,n);if(r){let i=Ju(r),s=i.path,o=i.queryId,a=oe(s,e),c=new go(Gu(o),a);return Xu(t,s,c)}else return[]}function Su(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||py(o,e))){let c=D0(o,e,n,r);E0(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(s,(h,f)=>At(f));if(d&&!u){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=P0(h);for(let p=0;p<f.length;++p){let g=f[p],m=g.query,_=vy(t,g);t.listenProvider_.startListening(oi(m),Do(t,m),_.hashFn,_.onComplete)}}}!u&&l.length>0&&!r&&(d?t.listenProvider_.stopListening(oi(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(Mo(h));t.listenProvider_.stopListening(oi(h),f)}))}O0(t,l)}return a}function R0(t,e,n,r){let i=Zu(t,r);if(i!=null){let s=Ju(i),o=s.path,a=s.queryId,c=oe(o,e),l=new Jn(Gu(a),c,n);return Xu(t,o,l)}else return[]}function x0(t,e,n,r){let i=Zu(t,r);if(i){let s=Ju(i),o=s.path,a=s.queryId,c=oe(o,e),l=ce.fromObject(n),d=new mo(Gu(a),c,l);return Xu(t,o,d)}else return[]}function Em(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let p=oe(h,i);s=s||Gn(f,p),o=o||At(f)});let a=t.syncPointTree_.get(i);a?(o=o||At(a),s=s||Gn(a,j())):(a=new Tu,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=w.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{let g=Gn(p,j());g&&(s=s.updateImmediateChild(f,g))}));let l=py(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Mo(e);y(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=k0();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let d=qu(t.pendingWriteTree_,i),u=w0(a,e,n,d,s,c);if(!l&&!o&&!r){let h=hy(a,e);u=u.concat(L0(t,e,h))}return u}function gy(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=oe(o,e),l=Gn(a,c);if(l)return l});return oy(i,e,s,n,!0)}function yi(t,e){return my(e,t.syncPointTree_,null,qu(t.pendingWriteTree_,j()))}function my(t,e,n,r){if(A(t.path))return yy(t,e,n,r);{let i=e.get(j());n==null&&i!=null&&(n=Gn(i,j()));let s=[],o=N(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=ay(r,o);s=s.concat(my(a,c,l,d))}return i&&(s=s.concat(Qu(i,t,r,n))),s}}function yy(t,e,n,r){let i=e.get(j());n==null&&i!=null&&(n=Gn(i,j()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=ay(r,o),d=t.operationForChild(o);d&&(s=s.concat(yy(d,a,c,l)))}),i&&(s=s.concat(Qu(i,t,r,n))),s}function vy(t,e){let n=e.query,r=Do(t,n);return{hashFn:()=>(p0(e)||w.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?M0(t,n._path,r):A0(t,n._path);{let s=QT(i,n);return Su(t,n,null,s)}}}}function Do(t,e){let n=Mo(e);return t.queryToTagMap.get(n)}function Mo(t){return t._path.toString()+"$"+t._queryIdentifier}function Zu(t,e){return t.tagToQueryMap.get(e)}function Ju(t){let e=t.indexOf("$");return y(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new B(t.substr(0,e))}}function Xu(t,e,n){let r=t.syncPointTree_.get(e);y(r,"Missing sync point for query tag that we're tracking");let i=qu(t.pendingWriteTree_,e);return Qu(r,n,i,null)}function P0(t){return t.fold((e,n,r)=>{if(n&&At(n))return[No(n)];{let i=[];return n&&(i=fy(n)),ae(r,(s,o)=>{i=i.concat(o)}),i}})}function oi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(b0())(t._repo,t._path):t}function O0(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Mo(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function k0(){return T0++}function L0(t,e,n){let r=e._path,i=Do(t,e),s=vy(t,n),o=t.listenProvider_.startListening(oi(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)y(!At(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,u)=>{if(!A(l)&&d&&At(d))return[No(d).query];{let h=[];return d&&(h=h.concat(fy(d).map(f=>f.query))),ae(u,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let d=c[l];t.listenProvider_.stopListening(oi(d),Do(t,d))}}return o}var Nu=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Au=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=K(this.path_,e);return new t(this.syncTree_,n)}node(){return gy(this.syncTree_,this.path_)}},F0=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Im=function(t,e,n){if(!t||typeof t!="object")return t;if(y(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return j0(t[".sv"],e,n);if(typeof t[".sv"]=="object")return V0(t[".sv"],e);y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},j0=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+t)}},V0=function(t,e,n){t.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=e.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},U0=function(t,e,n,r){return ed(e,new Au(n,t),r)},B0=function(t,e,n){return ed(t,new Nu(e),n)};function ed(t,e,n){let r=t.getPriority().val(),i=Im(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=Im(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Kn(a,ie(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Kn(i))),o.forEachChild(q,(a,c)=>{let l=ed(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var di=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function td(t,e){let n=e instanceof B?e:new B(e),r=t,i=N(n);for(;i!==null;){let s=Yt(r.node.children,i)||{children:{},childCount:0};r=new di(i,r,s),n=$(n),i=N(n)}return r}function tr(t){return t.node.value}function _y(t,e){t.node.value=e,Mu(t)}function Ey(t){return t.node.childCount>0}function $0(t){return tr(t)===void 0&&!Ey(t)}function Ro(t,e){ae(t.node.children,(n,r)=>{e(new di(n,t,r))})}function Iy(t,e,n,r){n&&!r&&e(t),Ro(t,i=>{Iy(i,e,!0,r)}),n&&r&&e(t)}function H0(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vi(t){return new B(t.parent===null?t.name:vi(t.parent)+"/"+t.name)}function Mu(t){t.parent!==null&&W0(t.parent,t.name,t)}function W0(t,e,n){let r=$0(n),i=$e(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Mu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Mu(t))}var z0=/[\[\].#$\/\u0000-\u001F\u007F]/,G0=/[\[\].#$\u0000-\u001F\u007F]/,Ul=10*1024*1024,wy=function(t){return typeof t=="string"&&t.length!==0&&!z0.test(t)},Dy=function(t){return typeof t=="string"&&t.length!==0&&!G0.test(t)},q0=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Dy(t)};var Cy=function(t,e,n){let r=n instanceof B?new eu(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+tn(r));if(typeof e=="function")throw new Error(t+"contains a function "+tn(r)+" with contents = "+e.toString());if(Nm(e))throw new Error(t+"contains "+e.toString()+" "+tn(r));if(typeof e=="string"&&e.length>Ul/3&&Fr(e)>Ul)throw new Error(t+"contains a string greater than "+Ul+" utf8 bytes "+tn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ae(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!wy(o)))throw new Error(t+" contains an invalid key ("+o+") "+tn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bS(r,o),Cy(t,a,r),TS(r)}),i&&s)throw new Error(t+' contains ".value" child '+tn(r)+" in addition to actual children.")}};var by=function(t,e,n,r){if(!(r&&n===void 0)&&!Dy(n))throw new Error(nl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Y0=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),by(t,e,n,r)};var K0=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!q0(n))throw new Error(nl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ru=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Ty(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!$u(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Sy(t,e,n){Ty(t,n),Ny(t,r=>$u(r,e))}function cn(t,e,n){Ty(t,n),Ny(t,r=>Ae(r,e)||Ae(e,r))}function Ny(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(Q0(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Q0(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();rn&&re("event: "+n.toString()),gi(r)}}}var Z0="repo_interrupt",J0=25,xu=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ru,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=po(),this.transactionQueueTree_=new di,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function X0(t,e,n){if(t.stats_=Bu(t.repoInfo_),t.forceRestClient_||eS())t.server_=new du(t.repoInfo_,(r,i,s,o)=>{wm(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Dm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Y(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Hu(t.repoInfo_,e,(r,i,s,o)=>{wm(t,r,i,s,o)},r=>{Dm(t,r)},r=>{tN(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=nS(t.repoInfo_,()=>new gu(t.stats_,t.server_)),t.infoData_=new fu,t.infoSyncTree_=new wo({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ao(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),nd(t,"connected",!1),t.serverSyncTree_=new wo({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);cn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function eN(t){let n=t.infoData_.getNode(new B(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ay(t){return F0({timestamp:eN(t)})}function wm(t,e,n,r,i){t.dataUpdateCount++;let s=new B(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Or(n,l=>ie(l));o=x0(t.serverSyncTree_,s,c,i)}else{let c=ie(n);o=R0(t.serverSyncTree_,s,c,i)}else if(r){let c=Or(n,l=>ie(l));o=N0(t.serverSyncTree_,s,c)}else{let c=ie(n);o=Ao(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=id(t,s)),cn(t.eventQueue_,a,o)}function Dm(t,e){nd(t,"connected",e),e===!1&&rN(t)}function tN(t,e){ae(e,(n,r)=>{nd(t,n,r)})}function nd(t,e,n){let r=new B("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);let s=Ao(t.infoSyncTree_,r,i);cn(t.eventQueue_,r,s)}function nN(t){return t.nextWriteId_++}function rN(t){My(t,"onDisconnectEvents");let e=Ay(t),n=po();hu(t.onDisconnect_,j(),(i,s)=>{let o=U0(i,s,t.serverSyncTree_,e);ty(n,i,o)});let r=[];hu(n,j(),(i,s)=>{r=r.concat(Ao(t.serverSyncTree_,i,s));let o=cN(t,i);id(t,o)}),t.onDisconnect_=po(),cn(t.eventQueue_,j(),r)}function iN(t,e,n){let r;N(e._path)===".info"?r=Em(t.infoSyncTree_,e,n):r=Em(t.serverSyncTree_,e,n),Sy(t.eventQueue_,e._path,r)}function Cm(t,e,n){let r;N(e._path)===".info"?r=Su(t.infoSyncTree_,e,n):r=Su(t.serverSyncTree_,e,n),Sy(t.eventQueue_,e._path,r)}function sN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Z0)}function My(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),re(n,...e)}function Ry(t,e,n){return gy(t.serverSyncTree_,e,n)||w.EMPTY_NODE}function rd(t,e=t.transactionQueueTree_){if(e||xo(t,e),tr(e)){let n=Py(t,e);y(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&oN(t,vi(e),n)}else Ey(e)&&Ro(e,n=>{rd(t,n)})}function oN(t,e,n){let r=n.map(l=>l.currentWriteId),i=Ry(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];y(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=oe(e,d.path);s=s.updateChild(u,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{My(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let u=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Hn(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&u.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();xo(t,td(t.transactionQueueTree_,e)),rd(t,t.transactionQueueTree_),cn(t.eventQueue_,e,d);for(let h=0;h<u.length;h++)gi(u[h])}else{if(l==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{de("transaction at "+c.toString()+" failed: "+l);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=l}id(t,e)}},o)}function id(t,e){let n=xy(t,e),r=vi(n),i=Py(t,n);return aN(t,i,r),r}function aN(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=oe(n,c.path),d=!1,u;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,u=c.abortReason,i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=J0)d=!0,u="maxretry",i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0));else{let h=Ry(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Cy("transaction failed: Data returned ",f,c.path);let p=ie(f);typeof f=="object"&&f!=null&&$e(f,".priority")||(p=p.updatePriority(h.getPriority()));let m=c.currentWriteId,_=Ay(t),E=B0(p,h,_);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=E,c.currentWriteId=nN(t),o.splice(o.indexOf(m),1),i=i.concat(S0(t.serverSyncTree_,c.path,E,c.currentWriteId,c.applyLocally)),i=i.concat(Hn(t.serverSyncTree_,m,!0))}else d=!0,u="nodata",i=i.concat(Hn(t.serverSyncTree_,c.currentWriteId,!0))}cn(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(u),!1,null))))}xo(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)gi(r[a]);rd(t,t.transactionQueueTree_)}function xy(t,e){let n,r=t.transactionQueueTree_;for(n=N(e);n!==null&&tr(r)===void 0;)r=td(r,n),e=$(e),n=N(e);return r}function Py(t,e){let n=[];return Oy(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Oy(t,e,n){let r=tr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ro(e,i=>{Oy(t,i,n)})}function xo(t,e){let n=tr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,_y(e,n.length>0?n:void 0)}Ro(e,r=>{xo(t,r)})}function cN(t,e){let n=vi(xy(t,e)),r=td(t.transactionQueueTree_,e);return H0(r,i=>{Bl(t,i)}),Bl(t,r),Iy(r,i=>{Bl(t,i)}),n}function Bl(t,e){let n=tr(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(y(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(y(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Hn(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_y(e,void 0):n.length=s+1,cn(t.eventQueue_,vi(e),i);for(let o=0;o<r.length;o++)gi(r[o])}}function lN(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function uN(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):de(`Invalid query segment '${n}' in query '${t}'`)}return e}var bm=function(t,e){let n=dN(t),r=n.namespace;n.domain==="firebase.com"&&st(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&st("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zT();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new so(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new B(n.pathString)}},dN=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(d,u)),d<u&&(i=lN(t.substring(d,u)));let h=uN(t.substring(Math.min(t.length,u)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Co=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Y(this.snapshot.exportVal())}},bo=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pu=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Ou=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return A(this._path)?null:Gm(this._path)}get ref(){return new at(this._repo,this._path)}get _queryIdentifier(){let e=lm(this._queryParams),n=Uu(e);return n==="{}"?"default":n}get _queryObject(){return lm(this._queryParams)}isEqual(e){if(e=He(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=$u(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+CS(this._path)}};var at=class t extends Ou{constructor(e,n){super(e,n,new uu,!1)}get parent(){let e=Ym(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},To=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new B(e),r=fi(this.ref,e);return new t(this._node.getChild(n),r,q)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,fi(this.ref,r),q)))}hasChild(e){let n=new B(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ky(t,e){return t=He(t),t._checkNotDeleted("ref"),e!==void 0?fi(t._root,e):t._root}function fi(t,e){return t=He(t),N(t._path)===null?Y0("child","path",e,!1):by("child","path",e,!1),new at(t._repo,K(t._path,e))}var ku=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Co("value",this,new To(e.snapshotNode,new at(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bo(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Lu=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bo(this,e,n):null}createEvent(e,n){y(e.childName!=null,"Child events should have a childName.");let r=fi(new at(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Co(e.type,this,new To(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function fN(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(d,u)=>{Cm(t._repo,t,a),c(d,u)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Pu(n,s||void 0),a=e==="value"?new ku(o):new Lu(e,o);return iN(t._repo,t,a),()=>Cm(t._repo,t,a)}function Ly(t,e,n,r){return fN(t,"value",e,n,r)}v0(at);C0(at);var hN="FIREBASE_DATABASE_EMULATOR_HOST",Fu={},pN=!1;function gN(t,e,n,r){t.repoInfo_=new so(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function mN(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||st("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),re("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=bm(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[hN]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=bm(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new ri(ri.OWNER):new ql(t.name,t.options,e);K0("Invalid Firebase Database URL",o),A(o.path)||st("Database URL must point to the root of a Firebase Database (not including a child path).");let u=vN(a,t,d,new Gl(t.name,n));return new ju(u,t)}function yN(t,e){let n=Fu[e];(!n||n[t.key]!==t)&&st(`Database ${e}(${t.repoInfo_}) has already been deleted.`),sN(t),delete n[t.key]}function vN(t,e,n,r){let i=Fu[e.name];i||(i={},Fu[e.name]=i);let s=i[t.toURLString()];return s&&st("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new xu(t,pN,n,r),i[t.toURLString()]=s,s}var ju=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X0(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new at(this._repo,j())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&st("Cannot call "+e+" on a deleted database.")}};function Fy(t=Br(),e){let n=ml(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=tg("database");r&&jy(n,...r)}return n}function jy(t,e,n,r={}){t=He(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&st("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&st('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ri(ri.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:rg(r.mockUserToken,t.app.options.projectId);s=new ri(o)}gN(i,e,n,s)}function _N(t){$T(jn),bt(new ve("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return mN(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Q(Gg,qg,t),Q(Gg,qg,"esm2017")}Hu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};_N();var ln=class{constructor(e){return e}},Vy="database",sd=class{constructor(){return Hr(Vy)}};var od=new b("angularfire2.database-instances");function EN(t,e){let n=_l(Vy,t,e);return n&&new ln(n)}function IN(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ln(r)}}var wN={provide:sd,deps:[[new Je,od]]},DN={provide:ln,useFactory:EN,deps:[[new Je,od],Jt]};function Uy(t,...e){return Q("angularfire",Un.full,"rtdb"),Ht([DN,wN,{provide:od,useFactory:IN(t),multi:!0,deps:[W,Ze,Wr,zr,[new Je,no],[new Je,$r],...e]}])}var By=Zt(Fy,!0);var $y=Zt(Ly,!0);var Hy=Zt(ky,!0);var Wy={production:!1,firebase:{apiKey:"AIzaSyDOplL52HhEkrhmOBZlE8dEiKbjfQAQVKM",authDomain:"pensadero-d4509.firebaseapp.com",projectId:"pensadero-d4509",storageBucket:"pensadero-d4509.appspot.com",messagingSenderId:"52056762900",appId:"1:52056762900:web:68533261130d4d3c0bd501",databaseURL:"https://pensadero-d4509-default-rtdb.firebaseio.com/"}};var zy={providers:[Bp(),Tg(()=>Sg(Wy.firebase)),Uy(()=>By())]};var qy=sv(Gy());var Po=class t{constructor(e){this.db=e}getThoughts(){let e=Hy(this.db,"pensamientos");return new H(n=>{$y(e,r=>{let i=r.val();n.next(i?Object.values(i):[])})})}static \u0275fac=function(n){return new(n||t)(D(ln))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})};var TN=["tagCloudContainer"];function SN(t,e){t&1&&(Ts(0,"div"),gp(1,"No hay pensamientos disponibles."),Ss())}var Oo=class t{constructor(e){this.thoughtsService=e}tagCloudContainer;thoughts=[];ngOnInit(){this.thoughtsService.getThoughts().subscribe(e=>{if(this.thoughts=e,this.thoughts.length>0&&this.tagCloudContainer){this.tagCloudContainer.nativeElement.innerHTML="";let n={radius:150,maxSpeed:"fast",initSpeed:"fast",keep:!0},r=this.thoughts.map(o=>o.texto);(0,qy.default)(this.tagCloudContainer.nativeElement,r,n);let i=["#34A853","#FBBC05","#4285F4","#7FBC00","#FFBA01","#01A6F0"],s=i[Math.floor(Math.random()*i.length)];this.tagCloudContainer.nativeElement.style.color=s}else console.log("No se encontraron pensamientos.")})}static \u0275fac=function(n){return new(n||t)(xn(Po))};static \u0275cmp=Af({type:t,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&fp(TN,5),n&2){let i;hp(i=pp())&&(r.tagCloudContainer=i.first)}},standalone:!0,features:[mp],decls:3,vars:1,consts:[["tagCloudContainer",""],[4,"ngIf"],[1,"words-sphere"]],template:function(n,r){n&1&&(Ac(0,SN,2,0,"div",1),Rc(1,"div",2,0)),n&2&&Mc("ngIf",r.thoughts.length===0)},dependencies:[Fc,Np],styles:[".words-sphere[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})};Kp(Oo,zy).catch(t=>console.error(t));
